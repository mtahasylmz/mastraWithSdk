"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ag-ui";
exports.ids = ["vendor-chunks/@ag-ui"];
exports.modules = {

/***/ "(ssr)/./node_modules/@ag-ui/client/dist/index.mjs":
/*!***************************************************!*\
  !*** ./node_modules/@ag-ui/client/dist/index.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIError: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError),\n/* harmony export */   AbstractAgent: () => (/* binding */ b),\n/* harmony export */   AssistantMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AssistantMessageSchema),\n/* harmony export */   BaseMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BaseMessageSchema),\n/* harmony export */   ContextSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas),\n/* harmony export */   EventType: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType),\n/* harmony export */   FunctionCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.FunctionCallSchema),\n/* harmony export */   HttpAgent: () => (/* binding */ G),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessagesSnapshotEventSchema),\n/* harmony export */   RawEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunErrorEventSchema),\n/* harmony export */   RunErrorSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunErrorSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunFinishedEventSchema),\n/* harmony export */   RunFinishedSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunFinishedSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunStartedEventSchema),\n/* harmony export */   RunStartedSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunStartedSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepFinishedEventSchema),\n/* harmony export */   StepFinishedSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepFinishedSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepStartedEventSchema),\n/* harmony export */   StepStartedSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepStartedSchema),\n/* harmony export */   SystemMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.SystemMessageSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallArgsEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallEndEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.UserMessageSchema),\n/* harmony export */   convertToLegacyEvents: () => (/* binding */ U),\n/* harmony export */   defaultApplyEvents: () => (/* binding */ I),\n/* harmony export */   parseProtoStream: () => (/* binding */ H),\n/* harmony export */   parseSSEStream: () => (/* binding */ w),\n/* harmony export */   runHttpRequest: () => (/* binding */ D),\n/* harmony export */   transformHttpEventStream: () => (/* binding */ P),\n/* harmony export */   verifyEvents: () => (/* binding */ O)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ \"(ssr)/./node_modules/rxjs/dist/cjs/operators/index.js\");\n/* harmony import */ var fast_json_patch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-json-patch */ \"(ssr)/./node_modules/fast-json-patch/index.mjs\");\n/* harmony import */ var untruncate_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! untruncate-json */ \"(ssr)/./node_modules/untruncate-json/dist/esm/index.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/cjs/index.js\");\n/* harmony import */ var _ag_ui_proto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ag-ui/proto */ \"(ssr)/./node_modules/@ag-ui/proto/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/v4.js\");\nvar $=Object.defineProperty,k=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var z=(u,e,t)=>e in u?$(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,x=(u,e)=>{for(var t in e||(e={}))J.call(e,t)&&z(u,t,e[t]);if(j)for(var t of j(e))q.call(e,t)&&z(u,t,e[t]);return u},_=(u,e)=>k(u,B(e));var v=u=>{if(typeof structuredClone==\"function\")return structuredClone(u);try{return JSON.parse(JSON.stringify(u))}catch(e){return x({},u)}};var I=(...u)=>{let[e,t]=u,n=v(e.messages),r=v(e.state),o,i=c=>[v(c)],s=()=>[];return t.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.mergeMap)(c=>{var R;switch(c.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let{messageId:E,role:p}=c,l={id:E,role:p,content:\"\"};return n.push(l),i({messages:n})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let{delta:E}=c,p=n[n.length-1];return p.content=p.content+E,i({messages:n})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let{toolCallId:E,toolCallName:p,parentMessageId:l}=c,d;return l&&n.length>0&&n[n.length-1].id===l?d=n[n.length-1]:(d={id:l||E,role:\"assistant\",toolCalls:[]},n.push(d)),(R=d.toolCalls)!=null||(d.toolCalls=[]),d.toolCalls.push({id:E,type:\"function\",function:{name:p,arguments:\"\"}}),i({messages:n})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let{delta:E}=c,p=n[n.length-1],l=p.toolCalls[p.toolCalls.length-1];if(l.function.arguments+=E,o){let d=o.find(h=>h.tool===l.function.name);if(d)try{let h=JSON.parse((0,untruncate_json__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(l.function.arguments));return d.tool_argument&&d.tool_argument in h?(r=_(x({},r),{[d.state_key]:h[d.tool_argument]}),i({messages:n,state:r})):(r=_(x({},r),{[d.state_key]:h}),i({messages:n,state:r}))}catch(h){}}return i({messages:n})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:{let{snapshot:E}=c;return r=E,i({state:r})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let{delta:E}=c;try{return r=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(r,E,!0,!1).newDocument,i({state:r})}catch(p){let l=p instanceof Error?p.message:String(p);return console.warn(`Failed to apply state patch:\nCurrent state: ${JSON.stringify(r,null,2)}\nPatch operations: ${JSON.stringify(E,null,2)}\nError: ${l}`),s()}}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:{let{messages:E}=c;return n=E,i({messages:n})}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let E=c;return E.name===\"PredictState\"&&(o=E.value),s()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:return s();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:return o=void 0,s()}let f=c.type;return s()}))};var O=u=>{let e,t,n=!1,r=!1,o=!1,i=new Map;return u.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.mergeMap)(s=>{let c=s.type;if(r)return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${c}': The run has already errored with 'RUN_ERROR'. No further events can be sent.`));if(n&&c!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR)return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${c}': The run has already finished with 'RUN_FINISHED'. Start a new run with 'RUN_STARTED'.`));if(e!==void 0&&![_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT,_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END,_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW].includes(c))return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${c}' after 'TEXT_MESSAGE_START': Send 'TEXT_MESSAGE_END' first.`));if(t!==void 0&&![_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS,_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END,_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW].includes(c))return c===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TOOL_CALL_START' event: A tool call is already in progress. Complete it with 'TOOL_CALL_END' first.\")):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${c}' after 'TOOL_CALL_START': Send 'TOOL_CALL_END' first.`));if(o){if(c===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED)return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send multiple 'RUN_STARTED' events: A 'RUN_STARTED' event was already sent. Each run must have exactly one 'RUN_STARTED' event at the beginning.\"))}else if(o=!0,c!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED&&c!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR)return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"First event must be 'RUN_STARTED'\"));switch(c){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:return e!==void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TEXT_MESSAGE_START' event: A text message is already in progress. Complete it with 'TEXT_MESSAGE_END' first.\")):(e=s.messageId,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:return e===void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TEXT_MESSAGE_CONTENT' event: No active text message found. Start a text message with 'TEXT_MESSAGE_START' first.\")):s.messageId!==e?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_CONTENT' event: Message ID mismatch. The ID '${s.messageId}' doesn't match the active message ID '${e}'.`)):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:return e===void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TEXT_MESSAGE_END' event: No active text message found. A 'TEXT_MESSAGE_START' event must be sent first.\")):s.messageId!==e?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_END' event: Message ID mismatch. The ID '${s.messageId}' doesn't match the active message ID '${e}'.`)):(e=void 0,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:return t!==void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TOOL_CALL_START' event: A tool call is already in progress. Complete it with 'TOOL_CALL_END' first.\")):(t=s.toolCallId,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:return t===void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TOOL_CALL_ARGS' event: No active tool call found. Start a tool call with 'TOOL_CALL_START' first.\")):s.toolCallId!==t?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_ARGS' event: Tool call ID mismatch. The ID '${s.toolCallId}' doesn't match the active tool call ID '${t}'.`)):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:return t===void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'TOOL_CALL_END' event: No active tool call found. A 'TOOL_CALL_START' event must be sent first.\")):s.toolCallId!==t?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_END' event: Tool call ID mismatch. The ID '${s.toolCallId}' doesn't match the active tool call ID '${t}'.`)):(t=void 0,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:{let f=s.name;return i.has(f)?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Step \"${f}\" is already active for 'STEP_STARTED'`)):(i.set(f,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:{let f=s.name;return i.has(f)?(i.delete(f),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s)):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'STEP_FINISHED' for step \"${f}\" that was not started`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:{if(i.size>0){let f=Array.from(i.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while steps are still active: ${f}`))}return n=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s)}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:return r=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s);default:return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(s)}}))};var D=(u,e)=>(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.defer)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.from)(fetch(u,e))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.switchMap)(t=>{var o;let n={type:\"headers\",status:t.status,headers:t.headers},r=(o=t.body)==null?void 0:o.getReader();return r?new rxjs__WEBPACK_IMPORTED_MODULE_4__.Observable(i=>(i.next(n),(async()=>{try{for(;;){let{done:s,value:c}=await r.read();if(s)break;let f={type:\"data\",data:c};i.next(f)}i.complete()}catch(s){i.error(s)}})(),()=>{r.cancel()})):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>new Error(\"Failed to getReader() from response\"))}));var w=u=>{let e=new rxjs__WEBPACK_IMPORTED_MODULE_4__.Subject,t=new TextDecoder(\"utf-8\",{fatal:!1}),n=\"\";u.subscribe({next:o=>{if(o.type!==\"headers\"&&o.type===\"data\"&&o.data){let i=t.decode(o.data,{stream:!0});n+=i;let s=n.split(/\\n\\n/);n=s.pop()||\"\";for(let c of s)r(c)}},error:o=>e.error(o),complete:()=>{n&&(n+=t.decode(),r(n)),e.complete()}});function r(o){let i=o.split(`\n`),s=[];for(let c of i)c.startsWith(\"data: \")&&s.push(c.slice(6));if(s.length>0)try{let c=s.join(`\n`),f=JSON.parse(c);e.next(f)}catch(c){e.error(c)}}return e.asObservable()};var H=u=>{let e=new rxjs__WEBPACK_IMPORTED_MODULE_4__.Subject,t=new Uint8Array(0);u.subscribe({next:r=>{if(r.type!==\"headers\"&&r.type===\"data\"&&r.data){let o=new Uint8Array(t.length+r.data.length);o.set(t,0),o.set(r.data,t.length),t=o,n()}},error:r=>e.error(r),complete:()=>{if(t.length>0)try{n()}catch(r){console.warn(\"Incomplete or invalid protocol buffer data at stream end\")}e.complete()}});function n(){for(;t.length>=4;){let i=4+new DataView(t.buffer,t.byteOffset,4).getUint32(0,!1);if(t.length<i)break;try{let s=t.slice(4,i),c=_ag_ui_proto__WEBPACK_IMPORTED_MODULE_5__.decode(s);e.next(c),t=t.slice(i)}catch(s){let c=s instanceof Error?s.message:String(s);e.error(new Error(`Failed to decode protocol buffer message: ${c}`));return}}}return e.asObservable()};var P=u=>{let e=new rxjs__WEBPACK_IMPORTED_MODULE_4__.Subject,t=new rxjs__WEBPACK_IMPORTED_MODULE_4__.ReplaySubject,n=!1;return u.subscribe({next:r=>{t.next(r),r.type===\"headers\"&&!n?(n=!0,r.headers.get(\"content-type\")===_ag_ui_proto__WEBPACK_IMPORTED_MODULE_5__.AGUI_MEDIA_TYPE?H(t).subscribe({next:i=>e.next(i),error:i=>e.error(i),complete:()=>e.complete()}):w(t).subscribe({next:i=>{try{let s=_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(i);e.next(s)}catch(s){e.error(s)}},error:i=>e.error(i),complete:()=>e.complete()})):n||e.error(new Error(\"No headers event received before data events\"))},error:r=>{t.error(r),e.error(r)},complete:()=>{t.complete()}}),e.asObservable()};var g=zod__WEBPACK_IMPORTED_MODULE_6__.z.enum([\"TextMessageStart\",\"TextMessageContent\",\"TextMessageEnd\",\"ActionExecutionStart\",\"ActionExecutionArgs\",\"ActionExecutionEnd\",\"ActionExecutionResult\",\"AgentStateMessage\",\"MetaEvent\",\"RunStarted\",\"RunFinished\",\"RunError\",\"NodeStarted\",\"NodeFinished\"]),ie=zod__WEBPACK_IMPORTED_MODULE_6__.z.enum([\"LangGraphInterruptEvent\",\"PredictState\",\"Exit\"]),le=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.TextMessageStart),messageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional()}),ue=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.TextMessageContent),messageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),content:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()}),pe=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.TextMessageEnd),messageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()}),ge=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.ActionExecutionStart),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional()}),Ee=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.ActionExecutionArgs),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),args:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()}),me=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.ActionExecutionEnd),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()}),fe=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.ActionExecutionResult),actionName:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),result:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()}),de=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.AgentStateMessage),threadId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),agentName:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),nodeName:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),runId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),active:zod__WEBPACK_IMPORTED_MODULE_6__.z.boolean(),role:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),state:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),running:zod__WEBPACK_IMPORTED_MODULE_6__.z.boolean()}),ye=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({type:zod__WEBPACK_IMPORTED_MODULE_6__.z.literal(g.enum.MetaEvent),name:ie,value:zod__WEBPACK_IMPORTED_MODULE_6__.z.any()}),Ot=zod__WEBPACK_IMPORTED_MODULE_6__.z.discriminatedUnion(\"type\",[le,ue,pe,ge,Ee,me,fe,de,ye]),Nt=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),role:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),content:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional()}),It=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),name:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),arguments:zod__WEBPACK_IMPORTED_MODULE_6__.z.any(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string().optional()}),Dt=zod__WEBPACK_IMPORTED_MODULE_6__.z.object({id:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),result:zod__WEBPACK_IMPORTED_MODULE_6__.z.any(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_6__.z.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_6__.z.string()});var U=(u,e,t)=>n=>{let r={},o=!0,i=!0,s=\"\",c=null,f=null,R=[],E=p=>{typeof p==\"object\"&&p!==null&&(\"messages\"in p&&delete p.messages,r=p)};return n.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.mergeMap)(p=>{switch(p.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let l=p;return[{type:g.enum.TextMessageStart,messageId:l.messageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let l=p;return[{type:g.enum.TextMessageContent,messageId:l.messageId,content:l.delta}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let l=p;return[{type:g.enum.TextMessageEnd,messageId:l.messageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let l=p;return R.push({id:l.toolCallId,type:\"function\",function:{name:l.toolCallName,arguments:\"\"}}),i=!0,[{type:g.enum.ActionExecutionStart,actionExecutionId:l.toolCallId,actionName:l.toolCallName,parentMessageId:l.parentMessageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let l=p,d=R[R.length-1];d.function.arguments+=l.delta;let h=!1;if(f){let M=f.find(C=>C.tool==d.function.name);if(M)try{let C=JSON.parse((0,untruncate_json__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(d.function.arguments));M.tool_argument&&M.tool_argument in C?(E(_(x({},r),{[M.state_key]:C[M.tool_argument]})),h=!0):M.tool_argument||(E(_(x({},r),{[M.state_key]:C})),h=!0)}catch(C){}}return[{type:g.enum.ActionExecutionArgs,actionExecutionId:l.toolCallId,args:l.delta},...h?[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(r),active:i}]:[]]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let l=p;return[{type:g.enum.ActionExecutionEnd,actionExecutionId:l.toolCallId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let l=p;switch(l.name){case\"Exit\":o=!1;break;case\"PredictState\":f=l.value;break}return[{type:g.enum.MetaEvent,name:l.name,value:l.value}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:return E(p.snapshot),[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(r),active:i}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let d=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(r,p.delta,!0,!1);return d?(E(d.newDocument),[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(r),active:i}]):[]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:return c=p.messages,[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(x(x({},r),c?{messages:c}:{})),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:return c&&(r.messages=c),[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(x(x({},r),c?{messages:ve(c)}:{})),active:!1}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:return console.error(\"Run error\",p),[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:return s=p.stepName,R=[],f=null,[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(r),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:return R=[],f=null,[{type:g.enum.AgentStateMessage,threadId:u,agentName:t,nodeName:s,runId:e,running:o,role:\"assistant\",state:JSON.stringify(r),active:!1}];default:return[]}}))};function ve(u){var t;let e=[];for(let n of u)if(n.role===\"assistant\"||n.role===\"user\"||n.role===\"system\"){if(n.content){let r={id:n.id,role:n.role,content:n.content};e.push(r)}if(n.role===\"assistant\"&&n.toolCalls&&n.toolCalls.length>0)for(let r of n.toolCalls){let o={id:r.id,name:r.function.name,arguments:JSON.parse(r.function.arguments),parentMessageId:n.id};e.push(o)}}else if(n.role===\"tool\"){let r=\"unknown\";for(let i of u)if(i.role===\"assistant\"&&((t=i.toolCalls)!=null&&t.length)){for(let s of i.toolCalls)if(s.id===n.toolCallId){r=s.function.name;break}}let o={id:n.id,result:n.content,actionExecutionId:n.toolCallId,actionName:r};e.push(o)}return e}var b=class{constructor({agentId:e,description:t,threadId:n,initialMessages:r,initialState:o}={}){this.agentId=e,this.description=t!=null?t:\"\",this.threadId=n!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(),this.messages=v(r!=null?r:[]),this.state=v(o!=null?o:{})}async runAgent(e){var r;this.agentId=(r=this.agentId)!=null?r:(0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();let t=this.prepareRunAgentInput(e),n=(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.pipe)(()=>this.run(t),O,o=>this.apply(t,o),o=>this.processApplyEvents(t,o),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.catchError)(o=>(this.onError(o),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)(()=>o))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.finalize)(()=>{this.onFinalize()}));return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(n((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(null))).then(()=>{})}abortRun(){}apply(...e){return I(...e)}processApplyEvents(e,t){return t.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.tap)(n=>{n.messages&&(this.messages=n.messages),n.state&&(this.state=n.state)}))}prepareRunAgentInput(e){var t,n,r;return{threadId:this.threadId,runId:(e==null?void 0:e.runId)||(0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(),tools:v((t=e==null?void 0:e.tools)!=null?t:[]),context:v((n=e==null?void 0:e.context)!=null?n:[]),forwardedProps:v((r=e==null?void 0:e.forwardedProps)!=null?r:{}),state:v(this.state),messages:v(this.messages)}}onError(e){console.error(\"Agent execution failed:\",e)}onFinalize(){}clone(){let e=Object.create(Object.getPrototypeOf(this));for(let t of Object.getOwnPropertyNames(this)){let n=this[t];typeof n!=\"function\"&&(e[t]=v(n))}return e}legacy_to_be_removed_runAgentBridged(e){var n;this.agentId=(n=this.agentId)!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();let t=this.prepareRunAgentInput(e);return this.run(t).pipe(O,U(this.threadId,t.runId,this.agentId))}};var G=class extends b{constructor(t){var n;super(t);this.abortController=new AbortController;this.url=t.url,this.headers=v((n=t.headers)!=null?n:{})}requestInit(t){return{method:\"POST\",headers:_(x({},this.headers),{\"Content-Type\":\"application/json\",Accept:\"text/event-stream\"}),body:JSON.stringify(t),signal:this.abortController.signal}}runAgent(t){var n;return this.abortController=(n=t==null?void 0:t.abortController)!=null?n:new AbortController,super.runAgent(t)}abortRun(){this.abortController.abort(),super.abortRun()}run(t){let n=D(this.url,this.requestInit(t));return P(n)}};\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0RBQXNELHVDQUF1QyxtQ0FBbUMsOEVBQThFLDZCQUE2QixrREFBa0QsbUJBQW1CLHFCQUFxQiwyQkFBMkIsZ0RBQWdELFNBQVMsb0JBQXNHLFVBQVUsZ0VBQWdFLElBQUkscUNBQXFDLFNBQVMsV0FBVyxNQUFrRixlQUFlLCtEQUErRCxjQUFjLHdEQUFDLEtBQUssTUFBTSxlQUFlLEtBQUssa0RBQUMscUJBQXFCLElBQUksbUJBQW1CLE1BQU0sd0JBQXdCLG9CQUFvQixXQUFXLEVBQUUsS0FBSyxrREFBQyx1QkFBdUIsSUFBSSxRQUFRLG1CQUFtQixnQ0FBZ0MsV0FBVyxFQUFFLEtBQUssa0RBQUMsNkJBQTZCLEtBQUssa0RBQUMsa0JBQWtCLElBQUksOENBQThDLEtBQUssK0RBQStELHNDQUFzQyxzRUFBc0UsK0JBQStCLHFCQUFxQixLQUFLLFdBQVcsRUFBRSxLQUFLLGtEQUFDLGlCQUFpQixJQUFJLFFBQVEsdURBQXVELDhCQUE4QiwwQ0FBMEMsU0FBUyxpQkFBaUIsMkRBQUMsd0JBQXdCLHNEQUFzRCxLQUFLLGlDQUFpQyxLQUFLLG1CQUFtQixZQUFZLEtBQUssZ0JBQWdCLEtBQUssbUJBQW1CLEdBQUcsV0FBVyxVQUFVLFdBQVcsRUFBRSxLQUFLLGtEQUFDLDBCQUEwQixLQUFLLGtEQUFDLGlCQUFpQixJQUFJLFdBQVcsR0FBRyxjQUFjLFFBQVEsRUFBRSxLQUFLLGtEQUFDLGNBQWMsSUFBSSxRQUFRLEdBQUcsSUFBSSxTQUFTLDJEQUFDLDJCQUEyQixRQUFRLEVBQUUsU0FBUyw2Q0FBNkM7QUFDaGlFLGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsU0FBUyxFQUFFLFFBQVEsS0FBSyxrREFBQyxvQkFBb0IsSUFBSSxXQUFXLEdB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c3RyYS93aXRoQXBpL25vZGVfbW9kdWxlcy9AYWctdWkvY2xpZW50L2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciAkPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxrPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO3ZhciBCPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO3ZhciBqPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIEo9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxxPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7dmFyIHo9KHUsZSx0KT0+ZSBpbiB1PyQodSxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6dVtlXT10LHg9KHUsZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKUouY2FsbChlLHQpJiZ6KHUsdCxlW3RdKTtpZihqKWZvcih2YXIgdCBvZiBqKGUpKXEuY2FsbChlLHQpJiZ6KHUsdCxlW3RdKTtyZXR1cm4gdX0sXz0odSxlKT0+ayh1LEIoZSkpO2ltcG9ydHtFdmVudFR5cGUgYXMgU31mcm9tXCJAYWctdWkvY29yZVwiO2ltcG9ydHttZXJnZU1hcCBhcyBWfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7dmFyIHY9dT0+e2lmKHR5cGVvZiBzdHJ1Y3R1cmVkQ2xvbmU9PVwiZnVuY3Rpb25cIilyZXR1cm4gc3RydWN0dXJlZENsb25lKHUpO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1KSl9Y2F0Y2goZSl7cmV0dXJuIHgoe30sdSl9fTtpbXBvcnR7YXBwbHlQYXRjaCBhcyBXfWZyb21cImZhc3QtanNvbi1wYXRjaFwiO2ltcG9ydCBZIGZyb21cInVudHJ1bmNhdGUtanNvblwiO3ZhciBJPSguLi51KT0+e2xldFtlLHRdPXUsbj12KGUubWVzc2FnZXMpLHI9dihlLnN0YXRlKSxvLGk9Yz0+W3YoYyldLHM9KCk9PltdO3JldHVybiB0LnBpcGUoVihjPT57dmFyIFI7c3dpdGNoKGMudHlwZSl7Y2FzZSBTLlRFWFRfTUVTU0FHRV9TVEFSVDp7bGV0e21lc3NhZ2VJZDpFLHJvbGU6cH09YyxsPXtpZDpFLHJvbGU6cCxjb250ZW50OlwiXCJ9O3JldHVybiBuLnB1c2gobCksaSh7bWVzc2FnZXM6bn0pfWNhc2UgUy5URVhUX01FU1NBR0VfQ09OVEVOVDp7bGV0e2RlbHRhOkV9PWMscD1uW24ubGVuZ3RoLTFdO3JldHVybiBwLmNvbnRlbnQ9cC5jb250ZW50K0UsaSh7bWVzc2FnZXM6bn0pfWNhc2UgUy5URVhUX01FU1NBR0VfRU5EOnJldHVybiBzKCk7Y2FzZSBTLlRPT0xfQ0FMTF9TVEFSVDp7bGV0e3Rvb2xDYWxsSWQ6RSx0b29sQ2FsbE5hbWU6cCxwYXJlbnRNZXNzYWdlSWQ6bH09YyxkO3JldHVybiBsJiZuLmxlbmd0aD4wJiZuW24ubGVuZ3RoLTFdLmlkPT09bD9kPW5bbi5sZW5ndGgtMV06KGQ9e2lkOmx8fEUscm9sZTpcImFzc2lzdGFudFwiLHRvb2xDYWxsczpbXX0sbi5wdXNoKGQpKSwoUj1kLnRvb2xDYWxscykhPW51bGx8fChkLnRvb2xDYWxscz1bXSksZC50b29sQ2FsbHMucHVzaCh7aWQ6RSx0eXBlOlwiZnVuY3Rpb25cIixmdW5jdGlvbjp7bmFtZTpwLGFyZ3VtZW50czpcIlwifX0pLGkoe21lc3NhZ2VzOm59KX1jYXNlIFMuVE9PTF9DQUxMX0FSR1M6e2xldHtkZWx0YTpFfT1jLHA9bltuLmxlbmd0aC0xXSxsPXAudG9vbENhbGxzW3AudG9vbENhbGxzLmxlbmd0aC0xXTtpZihsLmZ1bmN0aW9uLmFyZ3VtZW50cys9RSxvKXtsZXQgZD1vLmZpbmQoaD0+aC50b29sPT09bC5mdW5jdGlvbi5uYW1lKTtpZihkKXRyeXtsZXQgaD1KU09OLnBhcnNlKFkobC5mdW5jdGlvbi5hcmd1bWVudHMpKTtyZXR1cm4gZC50b29sX2FyZ3VtZW50JiZkLnRvb2xfYXJndW1lbnQgaW4gaD8ocj1fKHgoe30scikse1tkLnN0YXRlX2tleV06aFtkLnRvb2xfYXJndW1lbnRdfSksaSh7bWVzc2FnZXM6bixzdGF0ZTpyfSkpOihyPV8oeCh7fSxyKSx7W2Quc3RhdGVfa2V5XTpofSksaSh7bWVzc2FnZXM6bixzdGF0ZTpyfSkpfWNhdGNoKGgpe319cmV0dXJuIGkoe21lc3NhZ2VzOm59KX1jYXNlIFMuVE9PTF9DQUxMX0VORDpyZXR1cm4gcygpO2Nhc2UgUy5TVEFURV9TTkFQU0hPVDp7bGV0e3NuYXBzaG90OkV9PWM7cmV0dXJuIHI9RSxpKHtzdGF0ZTpyfSl9Y2FzZSBTLlNUQVRFX0RFTFRBOntsZXR7ZGVsdGE6RX09Yzt0cnl7cmV0dXJuIHI9VyhyLEUsITAsITEpLm5ld0RvY3VtZW50LGkoe3N0YXRlOnJ9KX1jYXRjaChwKXtsZXQgbD1wIGluc3RhbmNlb2YgRXJyb3I/cC5tZXNzYWdlOlN0cmluZyhwKTtyZXR1cm4gY29uc29sZS53YXJuKGBGYWlsZWQgdG8gYXBwbHkgc3RhdGUgcGF0Y2g6XG5DdXJyZW50IHN0YXRlOiAke0pTT04uc3RyaW5naWZ5KHIsbnVsbCwyKX1cblBhdGNoIG9wZXJhdGlvbnM6ICR7SlNPTi5zdHJpbmdpZnkoRSxudWxsLDIpfVxuRXJyb3I6ICR7bH1gKSxzKCl9fWNhc2UgUy5NRVNTQUdFU19TTkFQU0hPVDp7bGV0e21lc3NhZ2VzOkV9PWM7cmV0dXJuIG49RSxpKHttZXNzYWdlczpufSl9Y2FzZSBTLlJBVzpyZXR1cm4gcygpO2Nhc2UgUy5DVVNUT006e2xldCBFPWM7cmV0dXJuIEUubmFtZT09PVwiUHJlZGljdFN0YXRlXCImJihvPUUudmFsdWUpLHMoKX1jYXNlIFMuUlVOX1NUQVJURUQ6cmV0dXJuIHMoKTtjYXNlIFMuUlVOX0ZJTklTSEVEOnJldHVybiBzKCk7Y2FzZSBTLlJVTl9FUlJPUjpyZXR1cm4gcygpO2Nhc2UgUy5TVEVQX1NUQVJURUQ6cmV0dXJuIHMoKTtjYXNlIFMuU1RFUF9GSU5JU0hFRDpyZXR1cm4gbz12b2lkIDAscygpfWxldCBmPWMudHlwZTtyZXR1cm4gcygpfSkpfTtpbXBvcnR7RXZlbnRUeXBlIGFzIG0sQUdVSUVycm9yIGFzIHl9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7dGhyb3dFcnJvciBhcyBULG9mIGFzIEx9ZnJvbVwicnhqc1wiO2ltcG9ydHttZXJnZU1hcCBhcyBLfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7dmFyIE89dT0+e2xldCBlLHQsbj0hMSxyPSExLG89ITEsaT1uZXcgTWFwO3JldHVybiB1LnBpcGUoSyhzPT57bGV0IGM9cy50eXBlO2lmKHIpcmV0dXJuIFQoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCBldmVudCB0eXBlICcke2N9JzogVGhlIHJ1biBoYXMgYWxyZWFkeSBlcnJvcmVkIHdpdGggJ1JVTl9FUlJPUicuIE5vIGZ1cnRoZXIgZXZlbnRzIGNhbiBiZSBzZW50LmApKTtpZihuJiZjIT09bS5SVU5fRVJST1IpcmV0dXJuIFQoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCBldmVudCB0eXBlICcke2N9JzogVGhlIHJ1biBoYXMgYWxyZWFkeSBmaW5pc2hlZCB3aXRoICdSVU5fRklOSVNIRUQnLiBTdGFydCBhIG5ldyBydW4gd2l0aCAnUlVOX1NUQVJURUQnLmApKTtpZihlIT09dm9pZCAwJiYhW20uVEVYVF9NRVNTQUdFX0NPTlRFTlQsbS5URVhUX01FU1NBR0VfRU5ELG0uUkFXXS5pbmNsdWRlcyhjKSlyZXR1cm4gVCgoKT0+bmV3IHkoYENhbm5vdCBzZW5kIGV2ZW50IHR5cGUgJyR7Y30nIGFmdGVyICdURVhUX01FU1NBR0VfU1RBUlQnOiBTZW5kICdURVhUX01FU1NBR0VfRU5EJyBmaXJzdC5gKSk7aWYodCE9PXZvaWQgMCYmIVttLlRPT0xfQ0FMTF9BUkdTLG0uVE9PTF9DQUxMX0VORCxtLlJBV10uaW5jbHVkZXMoYykpcmV0dXJuIGM9PT1tLlRPT0xfQ0FMTF9TVEFSVD9UKCgpPT5uZXcgeShcIkNhbm5vdCBzZW5kICdUT09MX0NBTExfU1RBUlQnIGV2ZW50OiBBIHRvb2wgY2FsbCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLiBDb21wbGV0ZSBpdCB3aXRoICdUT09MX0NBTExfRU5EJyBmaXJzdC5cIikpOlQoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCBldmVudCB0eXBlICcke2N9JyBhZnRlciAnVE9PTF9DQUxMX1NUQVJUJzogU2VuZCAnVE9PTF9DQUxMX0VORCcgZmlyc3QuYCkpO2lmKG8pe2lmKGM9PT1tLlJVTl9TVEFSVEVEKXJldHVybiBUKCgpPT5uZXcgeShcIkNhbm5vdCBzZW5kIG11bHRpcGxlICdSVU5fU1RBUlRFRCcgZXZlbnRzOiBBICdSVU5fU1RBUlRFRCcgZXZlbnQgd2FzIGFscmVhZHkgc2VudC4gRWFjaCBydW4gbXVzdCBoYXZlIGV4YWN0bHkgb25lICdSVU5fU1RBUlRFRCcgZXZlbnQgYXQgdGhlIGJlZ2lubmluZy5cIikpfWVsc2UgaWYobz0hMCxjIT09bS5SVU5fU1RBUlRFRCYmYyE9PW0uUlVOX0VSUk9SKXJldHVybiBUKCgpPT5uZXcgeShcIkZpcnN0IGV2ZW50IG11c3QgYmUgJ1JVTl9TVEFSVEVEJ1wiKSk7c3dpdGNoKGMpe2Nhc2UgbS5URVhUX01FU1NBR0VfU1RBUlQ6cmV0dXJuIGUhPT12b2lkIDA/VCgoKT0+bmV3IHkoXCJDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX1NUQVJUJyBldmVudDogQSB0ZXh0IG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gQ29tcGxldGUgaXQgd2l0aCAnVEVYVF9NRVNTQUdFX0VORCcgZmlyc3QuXCIpKTooZT1zLm1lc3NhZ2VJZCxMKHMpKTtjYXNlIG0uVEVYVF9NRVNTQUdFX0NPTlRFTlQ6cmV0dXJuIGU9PT12b2lkIDA/VCgoKT0+bmV3IHkoXCJDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX0NPTlRFTlQnIGV2ZW50OiBObyBhY3RpdmUgdGV4dCBtZXNzYWdlIGZvdW5kLiBTdGFydCBhIHRleHQgbWVzc2FnZSB3aXRoICdURVhUX01FU1NBR0VfU1RBUlQnIGZpcnN0LlwiKSk6cy5tZXNzYWdlSWQhPT1lP1QoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX0NPTlRFTlQnIGV2ZW50OiBNZXNzYWdlIElEIG1pc21hdGNoLiBUaGUgSUQgJyR7cy5tZXNzYWdlSWR9JyBkb2Vzbid0IG1hdGNoIHRoZSBhY3RpdmUgbWVzc2FnZSBJRCAnJHtlfScuYCkpOkwocyk7Y2FzZSBtLlRFWFRfTUVTU0FHRV9FTkQ6cmV0dXJuIGU9PT12b2lkIDA/VCgoKT0+bmV3IHkoXCJDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX0VORCcgZXZlbnQ6IE5vIGFjdGl2ZSB0ZXh0IG1lc3NhZ2UgZm91bmQuIEEgJ1RFWFRfTUVTU0FHRV9TVEFSVCcgZXZlbnQgbXVzdCBiZSBzZW50IGZpcnN0LlwiKSk6cy5tZXNzYWdlSWQhPT1lP1QoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX0VORCcgZXZlbnQ6IE1lc3NhZ2UgSUQgbWlzbWF0Y2guIFRoZSBJRCAnJHtzLm1lc3NhZ2VJZH0nIGRvZXNuJ3QgbWF0Y2ggdGhlIGFjdGl2ZSBtZXNzYWdlIElEICcke2V9Jy5gKSk6KGU9dm9pZCAwLEwocykpO2Nhc2UgbS5UT09MX0NBTExfU1RBUlQ6cmV0dXJuIHQhPT12b2lkIDA/VCgoKT0+bmV3IHkoXCJDYW5ub3Qgc2VuZCAnVE9PTF9DQUxMX1NUQVJUJyBldmVudDogQSB0b29sIGNhbGwgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gQ29tcGxldGUgaXQgd2l0aCAnVE9PTF9DQUxMX0VORCcgZmlyc3QuXCIpKToodD1zLnRvb2xDYWxsSWQsTChzKSk7Y2FzZSBtLlRPT0xfQ0FMTF9BUkdTOnJldHVybiB0PT09dm9pZCAwP1QoKCk9Pm5ldyB5KFwiQ2Fubm90IHNlbmQgJ1RPT0xfQ0FMTF9BUkdTJyBldmVudDogTm8gYWN0aXZlIHRvb2wgY2FsbCBmb3VuZC4gU3RhcnQgYSB0b29sIGNhbGwgd2l0aCAnVE9PTF9DQUxMX1NUQVJUJyBmaXJzdC5cIikpOnMudG9vbENhbGxJZCE9PXQ/VCgoKT0+bmV3IHkoYENhbm5vdCBzZW5kICdUT09MX0NBTExfQVJHUycgZXZlbnQ6IFRvb2wgY2FsbCBJRCBtaXNtYXRjaC4gVGhlIElEICcke3MudG9vbENhbGxJZH0nIGRvZXNuJ3QgbWF0Y2ggdGhlIGFjdGl2ZSB0b29sIGNhbGwgSUQgJyR7dH0nLmApKTpMKHMpO2Nhc2UgbS5UT09MX0NBTExfRU5EOnJldHVybiB0PT09dm9pZCAwP1QoKCk9Pm5ldyB5KFwiQ2Fubm90IHNlbmQgJ1RPT0xfQ0FMTF9FTkQnIGV2ZW50OiBObyBhY3RpdmUgdG9vbCBjYWxsIGZvdW5kLiBBICdUT09MX0NBTExfU1RBUlQnIGV2ZW50IG11c3QgYmUgc2VudCBmaXJzdC5cIikpOnMudG9vbENhbGxJZCE9PXQ/VCgoKT0+bmV3IHkoYENhbm5vdCBzZW5kICdUT09MX0NBTExfRU5EJyBldmVudDogVG9vbCBjYWxsIElEIG1pc21hdGNoLiBUaGUgSUQgJyR7cy50b29sQ2FsbElkfScgZG9lc24ndCBtYXRjaCB0aGUgYWN0aXZlIHRvb2wgY2FsbCBJRCAnJHt0fScuYCkpOih0PXZvaWQgMCxMKHMpKTtjYXNlIG0uU1RFUF9TVEFSVEVEOntsZXQgZj1zLm5hbWU7cmV0dXJuIGkuaGFzKGYpP1QoKCk9Pm5ldyB5KGBTdGVwIFwiJHtmfVwiIGlzIGFscmVhZHkgYWN0aXZlIGZvciAnU1RFUF9TVEFSVEVEJ2ApKTooaS5zZXQoZiwhMCksTChzKSl9Y2FzZSBtLlNURVBfRklOSVNIRUQ6e2xldCBmPXMubmFtZTtyZXR1cm4gaS5oYXMoZik/KGkuZGVsZXRlKGYpLEwocykpOlQoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCAnU1RFUF9GSU5JU0hFRCcgZm9yIHN0ZXAgXCIke2Z9XCIgdGhhdCB3YXMgbm90IHN0YXJ0ZWRgKSl9Y2FzZSBtLlJVTl9TVEFSVEVEOnJldHVybiBMKHMpO2Nhc2UgbS5SVU5fRklOSVNIRUQ6e2lmKGkuc2l6ZT4wKXtsZXQgZj1BcnJheS5mcm9tKGkua2V5cygpKS5qb2luKFwiLCBcIik7cmV0dXJuIFQoKCk9Pm5ldyB5KGBDYW5ub3Qgc2VuZCAnUlVOX0ZJTklTSEVEJyB3aGlsZSBzdGVwcyBhcmUgc3RpbGwgYWN0aXZlOiAke2Z9YCkpfXJldHVybiBuPSEwLEwocyl9Y2FzZSBtLlJVTl9FUlJPUjpyZXR1cm4gcj0hMCxMKHMpO2Nhc2UgbS5DVVNUT006cmV0dXJuIEwocyk7ZGVmYXVsdDpyZXR1cm4gTChzKX19KSl9O2ltcG9ydHtFdmVudFNjaGVtYXMgYXMgYWV9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7U3ViamVjdCBhcyBvZSxSZXBsYXlTdWJqZWN0IGFzIGNlfWZyb21cInJ4anNcIjtpbXBvcnR7T2JzZXJ2YWJsZSBhcyBRLGZyb20gYXMgWixkZWZlciBhcyBlZSx0aHJvd0Vycm9yIGFzIHRlfWZyb21cInJ4anNcIjtpbXBvcnR7c3dpdGNoTWFwIGFzIG5lfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7dmFyIEQ9KHUsZSk9PmVlKCgpPT5aKGZldGNoKHUsZSkpKS5waXBlKG5lKHQ9Pnt2YXIgbztsZXQgbj17dHlwZTpcImhlYWRlcnNcIixzdGF0dXM6dC5zdGF0dXMsaGVhZGVyczp0LmhlYWRlcnN9LHI9KG89dC5ib2R5KT09bnVsbD92b2lkIDA6by5nZXRSZWFkZXIoKTtyZXR1cm4gcj9uZXcgUShpPT4oaS5uZXh0KG4pLChhc3luYygpPT57dHJ5e2Zvcig7Oyl7bGV0e2RvbmU6cyx2YWx1ZTpjfT1hd2FpdCByLnJlYWQoKTtpZihzKWJyZWFrO2xldCBmPXt0eXBlOlwiZGF0YVwiLGRhdGE6Y307aS5uZXh0KGYpfWkuY29tcGxldGUoKX1jYXRjaChzKXtpLmVycm9yKHMpfX0pKCksKCk9PntyLmNhbmNlbCgpfSkpOnRlKCgpPT5uZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2V0UmVhZGVyKCkgZnJvbSByZXNwb25zZVwiKSl9KSk7aW1wb3J0e1N1YmplY3QgYXMgc2V9ZnJvbVwicnhqc1wiO3ZhciB3PXU9PntsZXQgZT1uZXcgc2UsdD1uZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiLHtmYXRhbDohMX0pLG49XCJcIjt1LnN1YnNjcmliZSh7bmV4dDpvPT57aWYoby50eXBlIT09XCJoZWFkZXJzXCImJm8udHlwZT09PVwiZGF0YVwiJiZvLmRhdGEpe2xldCBpPXQuZGVjb2RlKG8uZGF0YSx7c3RyZWFtOiEwfSk7bis9aTtsZXQgcz1uLnNwbGl0KC9cXG5cXG4vKTtuPXMucG9wKCl8fFwiXCI7Zm9yKGxldCBjIG9mIHMpcihjKX19LGVycm9yOm89PmUuZXJyb3IobyksY29tcGxldGU6KCk9PntuJiYobis9dC5kZWNvZGUoKSxyKG4pKSxlLmNvbXBsZXRlKCl9fSk7ZnVuY3Rpb24gcihvKXtsZXQgaT1vLnNwbGl0KGBcbmApLHM9W107Zm9yKGxldCBjIG9mIGkpYy5zdGFydHNXaXRoKFwiZGF0YTogXCIpJiZzLnB1c2goYy5zbGljZSg2KSk7aWYocy5sZW5ndGg+MCl0cnl7bGV0IGM9cy5qb2luKGBcbmApLGY9SlNPTi5wYXJzZShjKTtlLm5leHQoZil9Y2F0Y2goYyl7ZS5lcnJvcihjKX19cmV0dXJuIGUuYXNPYnNlcnZhYmxlKCl9O2ltcG9ydHtTdWJqZWN0IGFzIHJlfWZyb21cInJ4anNcIjtpbXBvcnQqYXMgWCBmcm9tXCJAYWctdWkvcHJvdG9cIjt2YXIgSD11PT57bGV0IGU9bmV3IHJlLHQ9bmV3IFVpbnQ4QXJyYXkoMCk7dS5zdWJzY3JpYmUoe25leHQ6cj0+e2lmKHIudHlwZSE9PVwiaGVhZGVyc1wiJiZyLnR5cGU9PT1cImRhdGFcIiYmci5kYXRhKXtsZXQgbz1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCtyLmRhdGEubGVuZ3RoKTtvLnNldCh0LDApLG8uc2V0KHIuZGF0YSx0Lmxlbmd0aCksdD1vLG4oKX19LGVycm9yOnI9PmUuZXJyb3IociksY29tcGxldGU6KCk9PntpZih0Lmxlbmd0aD4wKXRyeXtuKCl9Y2F0Y2gocil7Y29uc29sZS53YXJuKFwiSW5jb21wbGV0ZSBvciBpbnZhbGlkIHByb3RvY29sIGJ1ZmZlciBkYXRhIGF0IHN0cmVhbSBlbmRcIil9ZS5jb21wbGV0ZSgpfX0pO2Z1bmN0aW9uIG4oKXtmb3IoO3QubGVuZ3RoPj00Oyl7bGV0IGk9NCtuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0LDQpLmdldFVpbnQzMigwLCExKTtpZih0Lmxlbmd0aDxpKWJyZWFrO3RyeXtsZXQgcz10LnNsaWNlKDQsaSksYz1YLmRlY29kZShzKTtlLm5leHQoYyksdD10LnNsaWNlKGkpfWNhdGNoKHMpe2xldCBjPXMgaW5zdGFuY2VvZiBFcnJvcj9zLm1lc3NhZ2U6U3RyaW5nKHMpO2UuZXJyb3IobmV3IEVycm9yKGBGYWlsZWQgdG8gZGVjb2RlIHByb3RvY29sIGJ1ZmZlciBtZXNzYWdlOiAke2N9YCkpO3JldHVybn19fXJldHVybiBlLmFzT2JzZXJ2YWJsZSgpfTtpbXBvcnQqYXMgRiBmcm9tXCJAYWctdWkvcHJvdG9cIjt2YXIgUD11PT57bGV0IGU9bmV3IG9lLHQ9bmV3IGNlLG49ITE7cmV0dXJuIHUuc3Vic2NyaWJlKHtuZXh0OnI9Pnt0Lm5leHQociksci50eXBlPT09XCJoZWFkZXJzXCImJiFuPyhuPSEwLHIuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik9PT1GLkFHVUlfTUVESUFfVFlQRT9IKHQpLnN1YnNjcmliZSh7bmV4dDppPT5lLm5leHQoaSksZXJyb3I6aT0+ZS5lcnJvcihpKSxjb21wbGV0ZTooKT0+ZS5jb21wbGV0ZSgpfSk6dyh0KS5zdWJzY3JpYmUoe25leHQ6aT0+e3RyeXtsZXQgcz1hZS5wYXJzZShpKTtlLm5leHQocyl9Y2F0Y2gocyl7ZS5lcnJvcihzKX19LGVycm9yOmk9PmUuZXJyb3IoaSksY29tcGxldGU6KCk9PmUuY29tcGxldGUoKX0pKTpufHxlLmVycm9yKG5ldyBFcnJvcihcIk5vIGhlYWRlcnMgZXZlbnQgcmVjZWl2ZWQgYmVmb3JlIGRhdGEgZXZlbnRzXCIpKX0sZXJyb3I6cj0+e3QuZXJyb3IociksZS5lcnJvcihyKX0sY29tcGxldGU6KCk9Pnt0LmNvbXBsZXRlKCl9fSksZS5hc09ic2VydmFibGUoKX07aW1wb3J0e21lcmdlTWFwIGFzIFRlfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e2FwcGx5UGF0Y2ggYXMgU2V9ZnJvbVwiZmFzdC1qc29uLXBhdGNoXCI7aW1wb3J0e0V2ZW50VHlwZSBhcyBBfWZyb21cIkBhZy11aS9jb3JlXCI7aW1wb3J0e3ogYXMgYX1mcm9tXCJ6b2RcIjt2YXIgZz1hLmVudW0oW1wiVGV4dE1lc3NhZ2VTdGFydFwiLFwiVGV4dE1lc3NhZ2VDb250ZW50XCIsXCJUZXh0TWVzc2FnZUVuZFwiLFwiQWN0aW9uRXhlY3V0aW9uU3RhcnRcIixcIkFjdGlvbkV4ZWN1dGlvbkFyZ3NcIixcIkFjdGlvbkV4ZWN1dGlvbkVuZFwiLFwiQWN0aW9uRXhlY3V0aW9uUmVzdWx0XCIsXCJBZ2VudFN0YXRlTWVzc2FnZVwiLFwiTWV0YUV2ZW50XCIsXCJSdW5TdGFydGVkXCIsXCJSdW5GaW5pc2hlZFwiLFwiUnVuRXJyb3JcIixcIk5vZGVTdGFydGVkXCIsXCJOb2RlRmluaXNoZWRcIl0pLGllPWEuZW51bShbXCJMYW5nR3JhcGhJbnRlcnJ1cHRFdmVudFwiLFwiUHJlZGljdFN0YXRlXCIsXCJFeGl0XCJdKSxsZT1hLm9iamVjdCh7dHlwZTphLmxpdGVyYWwoZy5lbnVtLlRleHRNZXNzYWdlU3RhcnQpLG1lc3NhZ2VJZDphLnN0cmluZygpLHBhcmVudE1lc3NhZ2VJZDphLnN0cmluZygpLm9wdGlvbmFsKCl9KSx1ZT1hLm9iamVjdCh7dHlwZTphLmxpdGVyYWwoZy5lbnVtLlRleHRNZXNzYWdlQ29udGVudCksbWVzc2FnZUlkOmEuc3RyaW5nKCksY29udGVudDphLnN0cmluZygpfSkscGU9YS5vYmplY3Qoe3R5cGU6YS5saXRlcmFsKGcuZW51bS5UZXh0TWVzc2FnZUVuZCksbWVzc2FnZUlkOmEuc3RyaW5nKCl9KSxnZT1hLm9iamVjdCh7dHlwZTphLmxpdGVyYWwoZy5lbnVtLkFjdGlvbkV4ZWN1dGlvblN0YXJ0KSxhY3Rpb25FeGVjdXRpb25JZDphLnN0cmluZygpLGFjdGlvbk5hbWU6YS5zdHJpbmcoKSxwYXJlbnRNZXNzYWdlSWQ6YS5zdHJpbmcoKS5vcHRpb25hbCgpfSksRWU9YS5vYmplY3Qoe3R5cGU6YS5saXRlcmFsKGcuZW51bS5BY3Rpb25FeGVjdXRpb25BcmdzKSxhY3Rpb25FeGVjdXRpb25JZDphLnN0cmluZygpLGFyZ3M6YS5zdHJpbmcoKX0pLG1lPWEub2JqZWN0KHt0eXBlOmEubGl0ZXJhbChnLmVudW0uQWN0aW9uRXhlY3V0aW9uRW5kKSxhY3Rpb25FeGVjdXRpb25JZDphLnN0cmluZygpfSksZmU9YS5vYmplY3Qoe3R5cGU6YS5saXRlcmFsKGcuZW51bS5BY3Rpb25FeGVjdXRpb25SZXN1bHQpLGFjdGlvbk5hbWU6YS5zdHJpbmcoKSxhY3Rpb25FeGVjdXRpb25JZDphLnN0cmluZygpLHJlc3VsdDphLnN0cmluZygpfSksZGU9YS5vYmplY3Qoe3R5cGU6YS5saXRlcmFsKGcuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSksdGhyZWFkSWQ6YS5zdHJpbmcoKSxhZ2VudE5hbWU6YS5zdHJpbmcoKSxub2RlTmFtZTphLnN0cmluZygpLHJ1bklkOmEuc3RyaW5nKCksYWN0aXZlOmEuYm9vbGVhbigpLHJvbGU6YS5zdHJpbmcoKSxzdGF0ZTphLnN0cmluZygpLHJ1bm5pbmc6YS5ib29sZWFuKCl9KSx5ZT1hLm9iamVjdCh7dHlwZTphLmxpdGVyYWwoZy5lbnVtLk1ldGFFdmVudCksbmFtZTppZSx2YWx1ZTphLmFueSgpfSksT3Q9YS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsW2xlLHVlLHBlLGdlLEVlLG1lLGZlLGRlLHllXSksTnQ9YS5vYmplY3Qoe2lkOmEuc3RyaW5nKCkscm9sZTphLnN0cmluZygpLGNvbnRlbnQ6YS5zdHJpbmcoKSxwYXJlbnRNZXNzYWdlSWQ6YS5zdHJpbmcoKS5vcHRpb25hbCgpfSksSXQ9YS5vYmplY3Qoe2lkOmEuc3RyaW5nKCksbmFtZTphLnN0cmluZygpLGFyZ3VtZW50czphLmFueSgpLHBhcmVudE1lc3NhZ2VJZDphLnN0cmluZygpLm9wdGlvbmFsKCl9KSxEdD1hLm9iamVjdCh7aWQ6YS5zdHJpbmcoKSxyZXN1bHQ6YS5hbnkoKSxhY3Rpb25FeGVjdXRpb25JZDphLnN0cmluZygpLGFjdGlvbk5hbWU6YS5zdHJpbmcoKX0pO2ltcG9ydCBBZSBmcm9tXCJ1bnRydW5jYXRlLWpzb25cIjt2YXIgVT0odSxlLHQpPT5uPT57bGV0IHI9e30sbz0hMCxpPSEwLHM9XCJcIixjPW51bGwsZj1udWxsLFI9W10sRT1wPT57dHlwZW9mIHA9PVwib2JqZWN0XCImJnAhPT1udWxsJiYoXCJtZXNzYWdlc1wiaW4gcCYmZGVsZXRlIHAubWVzc2FnZXMscj1wKX07cmV0dXJuIG4ucGlwZShUZShwPT57c3dpdGNoKHAudHlwZSl7Y2FzZSBBLlRFWFRfTUVTU0FHRV9TVEFSVDp7bGV0IGw9cDtyZXR1cm5be3R5cGU6Zy5lbnVtLlRleHRNZXNzYWdlU3RhcnQsbWVzc2FnZUlkOmwubWVzc2FnZUlkfV19Y2FzZSBBLlRFWFRfTUVTU0FHRV9DT05URU5UOntsZXQgbD1wO3JldHVyblt7dHlwZTpnLmVudW0uVGV4dE1lc3NhZ2VDb250ZW50LG1lc3NhZ2VJZDpsLm1lc3NhZ2VJZCxjb250ZW50OmwuZGVsdGF9XX1jYXNlIEEuVEVYVF9NRVNTQUdFX0VORDp7bGV0IGw9cDtyZXR1cm5be3R5cGU6Zy5lbnVtLlRleHRNZXNzYWdlRW5kLG1lc3NhZ2VJZDpsLm1lc3NhZ2VJZH1dfWNhc2UgQS5UT09MX0NBTExfU1RBUlQ6e2xldCBsPXA7cmV0dXJuIFIucHVzaCh7aWQ6bC50b29sQ2FsbElkLHR5cGU6XCJmdW5jdGlvblwiLGZ1bmN0aW9uOntuYW1lOmwudG9vbENhbGxOYW1lLGFyZ3VtZW50czpcIlwifX0pLGk9ITAsW3t0eXBlOmcuZW51bS5BY3Rpb25FeGVjdXRpb25TdGFydCxhY3Rpb25FeGVjdXRpb25JZDpsLnRvb2xDYWxsSWQsYWN0aW9uTmFtZTpsLnRvb2xDYWxsTmFtZSxwYXJlbnRNZXNzYWdlSWQ6bC5wYXJlbnRNZXNzYWdlSWR9XX1jYXNlIEEuVE9PTF9DQUxMX0FSR1M6e2xldCBsPXAsZD1SW1IubGVuZ3RoLTFdO2QuZnVuY3Rpb24uYXJndW1lbnRzKz1sLmRlbHRhO2xldCBoPSExO2lmKGYpe2xldCBNPWYuZmluZChDPT5DLnRvb2w9PWQuZnVuY3Rpb24ubmFtZSk7aWYoTSl0cnl7bGV0IEM9SlNPTi5wYXJzZShBZShkLmZ1bmN0aW9uLmFyZ3VtZW50cykpO00udG9vbF9hcmd1bWVudCYmTS50b29sX2FyZ3VtZW50IGluIEM/KEUoXyh4KHt9LHIpLHtbTS5zdGF0ZV9rZXldOkNbTS50b29sX2FyZ3VtZW50XX0pKSxoPSEwKTpNLnRvb2xfYXJndW1lbnR8fChFKF8oeCh7fSxyKSx7W00uc3RhdGVfa2V5XTpDfSkpLGg9ITApfWNhdGNoKEMpe319cmV0dXJuW3t0eXBlOmcuZW51bS5BY3Rpb25FeGVjdXRpb25BcmdzLGFjdGlvbkV4ZWN1dGlvbklkOmwudG9vbENhbGxJZCxhcmdzOmwuZGVsdGF9LC4uLmg/W3t0eXBlOmcuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDp1LGFnZW50TmFtZTp0LG5vZGVOYW1lOnMscnVuSWQ6ZSxydW5uaW5nOm8scm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHIpLGFjdGl2ZTppfV06W11dfWNhc2UgQS5UT09MX0NBTExfRU5EOntsZXQgbD1wO3JldHVyblt7dHlwZTpnLmVudW0uQWN0aW9uRXhlY3V0aW9uRW5kLGFjdGlvbkV4ZWN1dGlvbklkOmwudG9vbENhbGxJZH1dfWNhc2UgQS5SQVc6cmV0dXJuW107Y2FzZSBBLkNVU1RPTTp7bGV0IGw9cDtzd2l0Y2gobC5uYW1lKXtjYXNlXCJFeGl0XCI6bz0hMTticmVhaztjYXNlXCJQcmVkaWN0U3RhdGVcIjpmPWwudmFsdWU7YnJlYWt9cmV0dXJuW3t0eXBlOmcuZW51bS5NZXRhRXZlbnQsbmFtZTpsLm5hbWUsdmFsdWU6bC52YWx1ZX1dfWNhc2UgQS5TVEFURV9TTkFQU0hPVDpyZXR1cm4gRShwLnNuYXBzaG90KSxbe3R5cGU6Zy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlLHRocmVhZElkOnUsYWdlbnROYW1lOnQsbm9kZU5hbWU6cyxydW5JZDplLHJ1bm5pbmc6byxyb2xlOlwiYXNzaXN0YW50XCIsc3RhdGU6SlNPTi5zdHJpbmdpZnkociksYWN0aXZlOml9XTtjYXNlIEEuU1RBVEVfREVMVEE6e2xldCBkPVNlKHIscC5kZWx0YSwhMCwhMSk7cmV0dXJuIGQ/KEUoZC5uZXdEb2N1bWVudCksW3t0eXBlOmcuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDp1LGFnZW50TmFtZTp0LG5vZGVOYW1lOnMscnVuSWQ6ZSxydW5uaW5nOm8scm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHIpLGFjdGl2ZTppfV0pOltdfWNhc2UgQS5NRVNTQUdFU19TTkFQU0hPVDpyZXR1cm4gYz1wLm1lc3NhZ2VzLFt7dHlwZTpnLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6dSxhZ2VudE5hbWU6dCxub2RlTmFtZTpzLHJ1bklkOmUscnVubmluZzpvLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeSh4KHgoe30sciksYz97bWVzc2FnZXM6Y306e30pKSxhY3RpdmU6ITB9XTtjYXNlIEEuUlVOX1NUQVJURUQ6cmV0dXJuW107Y2FzZSBBLlJVTl9GSU5JU0hFRDpyZXR1cm4gYyYmKHIubWVzc2FnZXM9YyksW3t0eXBlOmcuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDp1LGFnZW50TmFtZTp0LG5vZGVOYW1lOnMscnVuSWQ6ZSxydW5uaW5nOm8scm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHgoeCh7fSxyKSxjP3ttZXNzYWdlczp2ZShjKX06e30pKSxhY3RpdmU6ITF9XTtjYXNlIEEuUlVOX0VSUk9SOnJldHVybiBjb25zb2xlLmVycm9yKFwiUnVuIGVycm9yXCIscCksW107Y2FzZSBBLlNURVBfU1RBUlRFRDpyZXR1cm4gcz1wLnN0ZXBOYW1lLFI9W10sZj1udWxsLFt7dHlwZTpnLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6dSxhZ2VudE5hbWU6dCxub2RlTmFtZTpzLHJ1bklkOmUscnVubmluZzpvLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeShyKSxhY3RpdmU6ITB9XTtjYXNlIEEuU1RFUF9GSU5JU0hFRDpyZXR1cm4gUj1bXSxmPW51bGwsW3t0eXBlOmcuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDp1LGFnZW50TmFtZTp0LG5vZGVOYW1lOnMscnVuSWQ6ZSxydW5uaW5nOm8scm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHIpLGFjdGl2ZTohMX1dO2RlZmF1bHQ6cmV0dXJuW119fSkpfTtmdW5jdGlvbiB2ZSh1KXt2YXIgdDtsZXQgZT1bXTtmb3IobGV0IG4gb2YgdSlpZihuLnJvbGU9PT1cImFzc2lzdGFudFwifHxuLnJvbGU9PT1cInVzZXJcInx8bi5yb2xlPT09XCJzeXN0ZW1cIil7aWYobi5jb250ZW50KXtsZXQgcj17aWQ6bi5pZCxyb2xlOm4ucm9sZSxjb250ZW50Om4uY29udGVudH07ZS5wdXNoKHIpfWlmKG4ucm9sZT09PVwiYXNzaXN0YW50XCImJm4udG9vbENhbGxzJiZuLnRvb2xDYWxscy5sZW5ndGg+MClmb3IobGV0IHIgb2Ygbi50b29sQ2FsbHMpe2xldCBvPXtpZDpyLmlkLG5hbWU6ci5mdW5jdGlvbi5uYW1lLGFyZ3VtZW50czpKU09OLnBhcnNlKHIuZnVuY3Rpb24uYXJndW1lbnRzKSxwYXJlbnRNZXNzYWdlSWQ6bi5pZH07ZS5wdXNoKG8pfX1lbHNlIGlmKG4ucm9sZT09PVwidG9vbFwiKXtsZXQgcj1cInVua25vd25cIjtmb3IobGV0IGkgb2YgdSlpZihpLnJvbGU9PT1cImFzc2lzdGFudFwiJiYoKHQ9aS50b29sQ2FsbHMpIT1udWxsJiZ0Lmxlbmd0aCkpe2ZvcihsZXQgcyBvZiBpLnRvb2xDYWxscylpZihzLmlkPT09bi50b29sQ2FsbElkKXtyPXMuZnVuY3Rpb24ubmFtZTticmVha319bGV0IG89e2lkOm4uaWQscmVzdWx0Om4uY29udGVudCxhY3Rpb25FeGVjdXRpb25JZDpuLnRvb2xDYWxsSWQsYWN0aW9uTmFtZTpyfTtlLnB1c2gobyl9cmV0dXJuIGV9aW1wb3J0e3Y0IGFzIE59ZnJvbVwidXVpZFwiO2ltcG9ydHtjYXRjaEVycm9yIGFzIHhlLHRhcCBhcyBMZX1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO2ltcG9ydHtmaW5hbGl6ZSBhcyBoZX1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO2ltcG9ydHt0aHJvd0Vycm9yIGFzIFJlLHBpcGUgYXMgX2V9ZnJvbVwicnhqc1wiO2ltcG9ydHtsYXN0VmFsdWVGcm9tIGFzIE1lLG9mIGFzIENlfWZyb21cInJ4anNcIjt2YXIgYj1jbGFzc3tjb25zdHJ1Y3Rvcih7YWdlbnRJZDplLGRlc2NyaXB0aW9uOnQsdGhyZWFkSWQ6bixpbml0aWFsTWVzc2FnZXM6cixpbml0aWFsU3RhdGU6b309e30pe3RoaXMuYWdlbnRJZD1lLHRoaXMuZGVzY3JpcHRpb249dCE9bnVsbD90OlwiXCIsdGhpcy50aHJlYWRJZD1uIT1udWxsP246TigpLHRoaXMubWVzc2FnZXM9dihyIT1udWxsP3I6W10pLHRoaXMuc3RhdGU9dihvIT1udWxsP286e30pfWFzeW5jIHJ1bkFnZW50KGUpe3ZhciByO3RoaXMuYWdlbnRJZD0ocj10aGlzLmFnZW50SWQpIT1udWxsP3I6TigpO2xldCB0PXRoaXMucHJlcGFyZVJ1bkFnZW50SW5wdXQoZSksbj1fZSgoKT0+dGhpcy5ydW4odCksTyxvPT50aGlzLmFwcGx5KHQsbyksbz0+dGhpcy5wcm9jZXNzQXBwbHlFdmVudHModCxvKSx4ZShvPT4odGhpcy5vbkVycm9yKG8pLFJlKCgpPT5vKSkpLGhlKCgpPT57dGhpcy5vbkZpbmFsaXplKCl9KSk7cmV0dXJuIE1lKG4oQ2UobnVsbCkpKS50aGVuKCgpPT57fSl9YWJvcnRSdW4oKXt9YXBwbHkoLi4uZSl7cmV0dXJuIEkoLi4uZSl9cHJvY2Vzc0FwcGx5RXZlbnRzKGUsdCl7cmV0dXJuIHQucGlwZShMZShuPT57bi5tZXNzYWdlcyYmKHRoaXMubWVzc2FnZXM9bi5tZXNzYWdlcyksbi5zdGF0ZSYmKHRoaXMuc3RhdGU9bi5zdGF0ZSl9KSl9cHJlcGFyZVJ1bkFnZW50SW5wdXQoZSl7dmFyIHQsbixyO3JldHVybnt0aHJlYWRJZDp0aGlzLnRocmVhZElkLHJ1bklkOihlPT1udWxsP3ZvaWQgMDplLnJ1bklkKXx8TigpLHRvb2xzOnYoKHQ9ZT09bnVsbD92b2lkIDA6ZS50b29scykhPW51bGw/dDpbXSksY29udGV4dDp2KChuPWU9PW51bGw/dm9pZCAwOmUuY29udGV4dCkhPW51bGw/bjpbXSksZm9yd2FyZGVkUHJvcHM6digocj1lPT1udWxsP3ZvaWQgMDplLmZvcndhcmRlZFByb3BzKSE9bnVsbD9yOnt9KSxzdGF0ZTp2KHRoaXMuc3RhdGUpLG1lc3NhZ2VzOnYodGhpcy5tZXNzYWdlcyl9fW9uRXJyb3IoZSl7Y29uc29sZS5lcnJvcihcIkFnZW50IGV4ZWN1dGlvbiBmYWlsZWQ6XCIsZSl9b25GaW5hbGl6ZSgpe31jbG9uZSgpe2xldCBlPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpKTtmb3IobGV0IHQgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpe2xldCBuPXRoaXNbdF07dHlwZW9mIG4hPVwiZnVuY3Rpb25cIiYmKGVbdF09dihuKSl9cmV0dXJuIGV9bGVnYWN5X3RvX2JlX3JlbW92ZWRfcnVuQWdlbnRCcmlkZ2VkKGUpe3ZhciBuO3RoaXMuYWdlbnRJZD0obj10aGlzLmFnZW50SWQpIT1udWxsP246TigpO2xldCB0PXRoaXMucHJlcGFyZVJ1bkFnZW50SW5wdXQoZSk7cmV0dXJuIHRoaXMucnVuKHQpLnBpcGUoTyxVKHRoaXMudGhyZWFkSWQsdC5ydW5JZCx0aGlzLmFnZW50SWQpKX19O3ZhciBHPWNsYXNzIGV4dGVuZHMgYntjb25zdHJ1Y3Rvcih0KXt2YXIgbjtzdXBlcih0KTt0aGlzLmFib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMudXJsPXQudXJsLHRoaXMuaGVhZGVycz12KChuPXQuaGVhZGVycykhPW51bGw/bjp7fSl9cmVxdWVzdEluaXQodCl7cmV0dXJue21ldGhvZDpcIlBPU1RcIixoZWFkZXJzOl8oeCh7fSx0aGlzLmhlYWRlcnMpLHtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwiLEFjY2VwdDpcInRleHQvZXZlbnQtc3RyZWFtXCJ9KSxib2R5OkpTT04uc3RyaW5naWZ5KHQpLHNpZ25hbDp0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWx9fXJ1bkFnZW50KHQpe3ZhciBuO3JldHVybiB0aGlzLmFib3J0Q29udHJvbGxlcj0obj10PT1udWxsP3ZvaWQgMDp0LmFib3J0Q29udHJvbGxlcikhPW51bGw/bjpuZXcgQWJvcnRDb250cm9sbGVyLHN1cGVyLnJ1bkFnZW50KHQpfWFib3J0UnVuKCl7dGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKSxzdXBlci5hYm9ydFJ1bigpfXJ1bih0KXtsZXQgbj1EKHRoaXMudXJsLHRoaXMucmVxdWVzdEluaXQodCkpO3JldHVybiBQKG4pfX07ZXhwb3J0KmZyb21cIkBhZy11aS9jb3JlXCI7ZXhwb3J0e2IgYXMgQWJzdHJhY3RBZ2VudCxHIGFzIEh0dHBBZ2VudCxVIGFzIGNvbnZlcnRUb0xlZ2FjeUV2ZW50cyxJIGFzIGRlZmF1bHRBcHBseUV2ZW50cyxIIGFzIHBhcnNlUHJvdG9TdHJlYW0sdyBhcyBwYXJzZVNTRVN0cmVhbSxEIGFzIHJ1bkh0dHBSZXF1ZXN0LFAgYXMgdHJhbnNmb3JtSHR0cEV2ZW50U3RyZWFtLE8gYXMgdmVyaWZ5RXZlbnRzfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/native.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/native.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ randomUUID: crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9uYXRpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0M7QUFDcEMsaUVBQWUsRUFBRSxVQUFVLGtEQUFFLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL210YWhhc3lsbXovRGVza3RvcC91cHN0YXNoL21hc3RyYS93aXRoQXBpL25vZGVfbW9kdWxlcy9AYWctdWkvY2xpZW50L25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtL25hdGl2ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnY3J5cHRvJztcbmV4cG9ydCBkZWZhdWx0IHsgcmFuZG9tVVVJRCB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/native.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/regex.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/regex.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9yZWdleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxHQUFHLDhFQUE4RSxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9tdGFoYXN5bG16L0Rlc2t0b3AvdXBzdGFzaC9tYXN0cmEvd2l0aEFwaS9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9yZWdleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLThdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMHxmZmZmZmZmZi1mZmZmLWZmZmYtZmZmZi1mZmZmZmZmZmZmZmYpJC9pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/regex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/rng.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/rng.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9ybmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7QUFDQTtBQUNlO0FBQ2Y7QUFDQSxRQUFRLHNEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvaG9tZS9tdGFoYXN5bG16L0Rlc2t0b3AvdXBzdGFzaC9tYXN0cmEvd2l0aEFwaS9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9ybmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmFuZG9tRmlsbFN5bmMgfSBmcm9tICdjcnlwdG8nO1xuY29uc3Qgcm5kczhQb29sID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTtcbmxldCBwb29sUHRyID0gcm5kczhQb29sLmxlbmd0aDtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgICAgICByYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgICAgICBwb29sUHRyID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHJuZHM4UG9vbC5zbGljZShwb29sUHRyLCAocG9vbFB0ciArPSAxNikpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/rng.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/stringify.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/stringify.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/validate.js\");\n\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0RBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxTQUFTLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL210YWhhc3lsbXovRGVza3RvcC91cHN0YXNoL21hc3RyYS93aXRoQXBpL25vZGVfbW9kdWxlcy9AYWctdWkvY2xpZW50L25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtL3N0cmluZ2lmeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5jb25zdCBieXRlVG9IZXggPSBbXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArXG4gICAgICAgICctJyArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gK1xuICAgICAgICAnLScgK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAgIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpO1xuICAgIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHV1aWQ7XG59XG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/v4.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/v4.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n    if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n        return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? (0,_rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS92NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ047QUFDc0I7QUFDakQ7QUFDQSxRQUFRLGtEQUFNO0FBQ2QsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0Esc0RBQXNELG1EQUFHO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsT0FBTyxHQUFHLGFBQWE7QUFDM0U7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWU7QUFDMUI7QUFDQSxpRUFBZSxFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL210YWhhc3lsbXovRGVza3RvcC91cHN0YXNoL21hc3RyYS93aXRoQXBpL25vZGVfbW9kdWxlcy9AYWctdWkvY2xpZW50L25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtL3Y0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBuYXRpdmUgZnJvbSAnLi9uYXRpdmUuanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICAgIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICAgIH1cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gPz8gb3B0aW9ucy5ybmc/LigpID8/IHJuZygpO1xuICAgIGlmIChybmRzLmxlbmd0aCA8IDE2KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmFuZG9tIGJ5dGVzIGxlbmd0aCBtdXN0IGJlID49IDE2Jyk7XG4gICAgfVxuICAgIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG4gICAgaWYgKGJ1Zikge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICAgICAgaWYgKG9mZnNldCA8IDAgfHwgb2Zmc2V0ICsgMTYgPiBidWYubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVVVJRCBieXRlIHJhbmdlICR7b2Zmc2V0fToke29mZnNldCArIDE1fSBpcyBvdXQgb2YgYnVmZmVyIGJvdW5kc2ApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmO1xuICAgIH1cbiAgICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuZXhwb3J0IGRlZmF1bHQgdjQ7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/v4.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/validate.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/validate.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/regex.js\");\n\nfunction validate(uuid) {\n    return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUMvQjtBQUNBLHVDQUF1QyxpREFBSztBQUM1QztBQUNBLGlFQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbXRhaGFzeWxtei9EZXNrdG9wL3Vwc3Rhc2gvbWFzdHJhL3dpdGhBcGkvbm9kZV9tb2R1bGVzL0BhZy11aS9jbGllbnQvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20vdmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICAgIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/client/node_modules/uuid/dist/esm/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/core/dist/index.mjs":
/*!*************************************************!*\
  !*** ./node_modules/@ag-ui/core/dist/index.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIError: () => (/* binding */ AGUIError),\n/* harmony export */   AssistantMessageSchema: () => (/* binding */ AssistantMessageSchema),\n/* harmony export */   BaseMessageSchema: () => (/* binding */ BaseMessageSchema),\n/* harmony export */   ContextSchema: () => (/* binding */ ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* binding */ CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* binding */ DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* binding */ EventSchemas),\n/* harmony export */   EventType: () => (/* binding */ EventType),\n/* harmony export */   FunctionCallSchema: () => (/* binding */ FunctionCallSchema),\n/* harmony export */   MessageSchema: () => (/* binding */ MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* binding */ MessagesSnapshotEventSchema),\n/* harmony export */   RawEventSchema: () => (/* binding */ RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* binding */ RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* binding */ RunErrorEventSchema),\n/* harmony export */   RunErrorSchema: () => (/* binding */ RunErrorSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* binding */ RunFinishedEventSchema),\n/* harmony export */   RunFinishedSchema: () => (/* binding */ RunFinishedSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* binding */ RunStartedEventSchema),\n/* harmony export */   RunStartedSchema: () => (/* binding */ RunStartedSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* binding */ StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* binding */ StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* binding */ StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* binding */ StepFinishedEventSchema),\n/* harmony export */   StepFinishedSchema: () => (/* binding */ StepFinishedSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* binding */ StepStartedEventSchema),\n/* harmony export */   StepStartedSchema: () => (/* binding */ StepStartedSchema),\n/* harmony export */   SystemMessageSchema: () => (/* binding */ SystemMessageSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* binding */ TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* binding */ TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* binding */ TextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* binding */ ToolCallArgsEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* binding */ ToolCallEndEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* binding */ ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* binding */ ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* binding */ ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* binding */ UserMessageSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n// src/types.ts\n\nvar FunctionCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  arguments: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function\"),\n  function: FunctionCallSchema\n});\nvar BaseMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nvar DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"developer\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar SystemMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"system\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar AssistantMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"assistant\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n  toolCalls: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ToolCallSchema).optional()\n});\nvar UserMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"user\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar ToolMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"tool\"),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar MessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema\n]);\nvar RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"user\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"tool\")\n]);\nvar ContextSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar ToolSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_0__.z.any()\n  // JSON Schema for the tool parameters\n});\nvar RunAgentInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  state: zod__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(MessageSchema),\n  tools: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ToolSchema),\n  context: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(ContextSchema),\n  forwardedProps: zod__WEBPACK_IMPORTED_MODULE_0__.z.any()\n});\nvar StateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.any();\nvar AGUIError = class extends Error {\n  constructor(message) {\n    super(message);\n  }\n};\n\n// src/events.ts\n\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"TEXT_MESSAGE_START\"] = \"TEXT_MESSAGE_START\";\n  EventType2[\"TEXT_MESSAGE_CONTENT\"] = \"TEXT_MESSAGE_CONTENT\";\n  EventType2[\"TEXT_MESSAGE_END\"] = \"TEXT_MESSAGE_END\";\n  EventType2[\"TOOL_CALL_START\"] = \"TOOL_CALL_START\";\n  EventType2[\"TOOL_CALL_ARGS\"] = \"TOOL_CALL_ARGS\";\n  EventType2[\"TOOL_CALL_END\"] = \"TOOL_CALL_END\";\n  EventType2[\"STATE_SNAPSHOT\"] = \"STATE_SNAPSHOT\";\n  EventType2[\"STATE_DELTA\"] = \"STATE_DELTA\";\n  EventType2[\"MESSAGES_SNAPSHOT\"] = \"MESSAGES_SNAPSHOT\";\n  EventType2[\"RAW\"] = \"RAW\";\n  EventType2[\"CUSTOM\"] = \"CUSTOM\";\n  EventType2[\"RUN_STARTED\"] = \"RUN_STARTED\";\n  EventType2[\"RUN_FINISHED\"] = \"RUN_FINISHED\";\n  EventType2[\"RUN_ERROR\"] = \"RUN_ERROR\";\n  EventType2[\"STEP_STARTED\"] = \"STEP_STARTED\";\n  EventType2[\"STEP_FINISHED\"] = \"STEP_FINISHED\";\n  return EventType2;\n})(EventType || {});\nvar BaseEventSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.nativeEnum(EventType),\n  timestamp: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n  rawEvent: zod__WEBPACK_IMPORTED_MODULE_0__.z.any().optional()\n});\nvar RunStartedSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar RunFinishedSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar RunErrorSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nvar StepStartedSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar StepFinishedSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TEXT_MESSAGE_START\" /* TEXT_MESSAGE_START */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"assistant\")\n});\nvar TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TEXT_MESSAGE_CONTENT\" /* TEXT_MESSAGE_CONTENT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().refine((s) => s.length > 0, \"Delta must not be an empty string\")\n});\nvar TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TEXT_MESSAGE_END\" /* TEXT_MESSAGE_END */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TOOL_CALL_START\" /* TOOL_CALL_START */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nvar ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TOOL_CALL_ARGS\" /* TOOL_CALL_ARGS */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"TOOL_CALL_END\" /* TOOL_CALL_END */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STATE_SNAPSHOT\" /* STATE_SNAPSHOT */),\n  snapshot: StateSchema\n});\nvar StateDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STATE_DELTA\" /* STATE_DELTA */),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.any())\n  // JSON Patch (RFC 6902)\n});\nvar MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"MESSAGES_SNAPSHOT\" /* MESSAGES_SNAPSHOT */),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(MessageSchema)\n});\nvar RawEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RAW\" /* RAW */),\n  event: zod__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n  source: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nvar CustomEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"CUSTOM\" /* CUSTOM */),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.z.any()\n});\nvar RunStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar RunFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar RunErrorEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\nvar StepStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar StepFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nvar EventSchemas = zod__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema\n]);\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL2NvcmUvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDd0I7QUFDeEIseUJBQXlCLGtDQUFDO0FBQzFCLFFBQVEsa0NBQUM7QUFDVCxhQUFhLGtDQUFDO0FBQ2QsQ0FBQztBQUNELHFCQUFxQixrQ0FBQztBQUN0QixNQUFNLGtDQUFDO0FBQ1AsUUFBUSxrQ0FBQztBQUNUO0FBQ0EsQ0FBQztBQUNELHdCQUF3QixrQ0FBQztBQUN6QixNQUFNLGtDQUFDO0FBQ1AsUUFBUSxrQ0FBQztBQUNULFdBQVcsa0NBQUM7QUFDWixRQUFRLGtDQUFDO0FBQ1QsQ0FBQztBQUNEO0FBQ0EsUUFBUSxrQ0FBQztBQUNULFdBQVcsa0NBQUM7QUFDWixDQUFDO0FBQ0Q7QUFDQSxRQUFRLGtDQUFDO0FBQ1QsV0FBVyxrQ0FBQztBQUNaLENBQUM7QUFDRDtBQUNBLFFBQVEsa0NBQUM7QUFDVCxXQUFXLGtDQUFDO0FBQ1osYUFBYSxrQ0FBQztBQUNkLENBQUM7QUFDRDtBQUNBLFFBQVEsa0NBQUM7QUFDVCxXQUFXLGtDQUFDO0FBQ1osQ0FBQztBQUNELHdCQUF3QixrQ0FBQztBQUN6QixNQUFNLGtDQUFDO0FBQ1AsV0FBVyxrQ0FBQztBQUNaLFFBQVEsa0NBQUM7QUFDVCxjQUFjLGtDQUFDO0FBQ2YsQ0FBQztBQUNELG9CQUFvQixrQ0FBQztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0NBQUM7QUFDbEIsRUFBRSxrQ0FBQztBQUNILEVBQUUsa0NBQUM7QUFDSCxFQUFFLGtDQUFDO0FBQ0gsRUFBRSxrQ0FBQztBQUNILEVBQUUsa0NBQUM7QUFDSDtBQUNBLG9CQUFvQixrQ0FBQztBQUNyQixlQUFlLGtDQUFDO0FBQ2hCLFNBQVMsa0NBQUM7QUFDVixDQUFDO0FBQ0QsaUJBQWlCLGtDQUFDO0FBQ2xCLFFBQVEsa0NB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dXBzdGFzaC9tYXN0cmEvd2l0aEFwaS9ub2RlX21vZHVsZXMvQGFnLXVpL2NvcmUvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3R5cGVzLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xudmFyIEZ1bmN0aW9uQ2FsbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKSxcbiAgYXJndW1lbnRzOiB6LnN0cmluZygpXG59KTtcbnZhciBUb29sQ2FsbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIHR5cGU6IHoubGl0ZXJhbChcImZ1bmN0aW9uXCIpLFxuICBmdW5jdGlvbjogRnVuY3Rpb25DYWxsU2NoZW1hXG59KTtcbnZhciBCYXNlTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIHJvbGU6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBEZXZlbG9wZXJNZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwiZGV2ZWxvcGVyXCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpXG59KTtcbnZhciBTeXN0ZW1NZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwic3lzdGVtXCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpXG59KTtcbnZhciBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHRvb2xDYWxsczogei5hcnJheShUb29sQ2FsbFNjaGVtYSkub3B0aW9uYWwoKVxufSk7XG52YXIgVXNlck1lc3NhZ2VTY2hlbWEgPSBCYXNlTWVzc2FnZVNjaGVtYS5leHRlbmQoe1xuICByb2xlOiB6LmxpdGVyYWwoXCJ1c2VyXCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpXG59KTtcbnZhciBUb29sTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCksXG4gIHJvbGU6IHoubGl0ZXJhbChcInRvb2xcIiksXG4gIHRvb2xDYWxsSWQ6IHouc3RyaW5nKClcbn0pO1xudmFyIE1lc3NhZ2VTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbihcInJvbGVcIiwgW1xuICBEZXZlbG9wZXJNZXNzYWdlU2NoZW1hLFxuICBTeXN0ZW1NZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hLFxuICBVc2VyTWVzc2FnZVNjaGVtYSxcbiAgVG9vbE1lc3NhZ2VTY2hlbWFcbl0pO1xudmFyIFJvbGVTY2hlbWEgPSB6LnVuaW9uKFtcbiAgei5saXRlcmFsKFwiZGV2ZWxvcGVyXCIpLFxuICB6LmxpdGVyYWwoXCJzeXN0ZW1cIiksXG4gIHoubGl0ZXJhbChcImFzc2lzdGFudFwiKSxcbiAgei5saXRlcmFsKFwidXNlclwiKSxcbiAgei5saXRlcmFsKFwidG9vbFwiKVxuXSk7XG52YXIgQ29udGV4dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gIHZhbHVlOiB6LnN0cmluZygpXG59KTtcbnZhciBUb29sU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgcGFyYW1ldGVyczogei5hbnkoKVxuICAvLyBKU09OIFNjaGVtYSBmb3IgdGhlIHRvb2wgcGFyYW1ldGVyc1xufSk7XG52YXIgUnVuQWdlbnRJbnB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdGhyZWFkSWQ6IHouc3RyaW5nKCksXG4gIHJ1bklkOiB6LnN0cmluZygpLFxuICBzdGF0ZTogei5hbnkoKSxcbiAgbWVzc2FnZXM6IHouYXJyYXkoTWVzc2FnZVNjaGVtYSksXG4gIHRvb2xzOiB6LmFycmF5KFRvb2xTY2hlbWEpLFxuICBjb250ZXh0OiB6LmFycmF5KENvbnRleHRTY2hlbWEpLFxuICBmb3J3YXJkZWRQcm9wczogei5hbnkoKVxufSk7XG52YXIgU3RhdGVTY2hlbWEgPSB6LmFueSgpO1xudmFyIEFHVUlFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8vIHNyYy9ldmVudHMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kXCI7XG52YXIgRXZlbnRUeXBlID0gLyogQF9fUFVSRV9fICovICgoRXZlbnRUeXBlMikgPT4ge1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX1NUQVJUXCJdID0gXCJURVhUX01FU1NBR0VfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRFWFRfTUVTU0FHRV9DT05URU5UXCJdID0gXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiO1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX0VORFwiXSA9IFwiVEVYVF9NRVNTQUdFX0VORFwiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX1NUQVJUXCJdID0gXCJUT09MX0NBTExfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9BUkdTXCJdID0gXCJUT09MX0NBTExfQVJHU1wiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX0VORFwiXSA9IFwiVE9PTF9DQUxMX0VORFwiO1xuICBFdmVudFR5cGUyW1wiU1RBVEVfU05BUFNIT1RcIl0gPSBcIlNUQVRFX1NOQVBTSE9UXCI7XG4gIEV2ZW50VHlwZTJbXCJTVEFURV9ERUxUQVwiXSA9IFwiU1RBVEVfREVMVEFcIjtcbiAgRXZlbnRUeXBlMltcIk1FU1NBR0VTX1NOQVBTSE9UXCJdID0gXCJNRVNTQUdFU19TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUyW1wiUkFXXCJdID0gXCJSQVdcIjtcbiAgRXZlbnRUeXBlMltcIkNVU1RPTVwiXSA9IFwiQ1VTVE9NXCI7XG4gIEV2ZW50VHlwZTJbXCJSVU5fU1RBUlRFRFwiXSA9IFwiUlVOX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlMltcIlJVTl9GSU5JU0hFRFwiXSA9IFwiUlVOX0ZJTklTSEVEXCI7XG4gIEV2ZW50VHlwZTJbXCJSVU5fRVJST1JcIl0gPSBcIlJVTl9FUlJPUlwiO1xuICBFdmVudFR5cGUyW1wiU1RFUF9TVEFSVEVEXCJdID0gXCJTVEVQX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlMltcIlNURVBfRklOSVNIRURcIl0gPSBcIlNURVBfRklOSVNIRURcIjtcbiAgcmV0dXJuIEV2ZW50VHlwZTI7XG59KShFdmVudFR5cGUgfHwge30pO1xudmFyIEJhc2VFdmVudFNjaGVtYSA9IHoyLm9iamVjdCh7XG4gIHR5cGU6IHoyLm5hdGl2ZUVudW0oRXZlbnRUeXBlKSxcbiAgdGltZXN0YW1wOiB6Mi5udW1iZXIoKS5vcHRpb25hbCgpLFxuICByYXdFdmVudDogejIuYW55KCkub3B0aW9uYWwoKVxufSk7XG52YXIgUnVuU3RhcnRlZFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUlVOX1NUQVJURURcIiAvKiBSVU5fU1RBUlRFRCAqLyksXG4gIHRocmVhZElkOiB6Mi5zdHJpbmcoKSxcbiAgcnVuSWQ6IHoyLnN0cmluZygpXG59KTtcbnZhciBSdW5GaW5pc2hlZFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUlVOX0ZJTklTSEVEXCIgLyogUlVOX0ZJTklTSEVEICovKSxcbiAgdGhyZWFkSWQ6IHoyLnN0cmluZygpLFxuICBydW5JZDogejIuc3RyaW5nKClcbn0pO1xudmFyIFJ1bkVycm9yU2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fRVJST1JcIiAvKiBSVU5fRVJST1IgKi8pLFxuICBtZXNzYWdlOiB6Mi5zdHJpbmcoKSxcbiAgY29kZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgU3RlcFN0YXJ0ZWRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlNURVBfU1RBUlRFRFwiIC8qIFNURVBfU1RBUlRFRCAqLyksXG4gIHN0ZXBOYW1lOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgU3RlcEZpbmlzaGVkU2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEVQX0ZJTklTSEVEXCIgLyogU1RFUF9GSU5JU0hFRCAqLyksXG4gIHN0ZXBOYW1lOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJURVhUX01FU1NBR0VfU1RBUlRcIiAvKiBURVhUX01FU1NBR0VfU1RBUlQgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICByb2xlOiB6Mi5saXRlcmFsKFwiYXNzaXN0YW50XCIpXG59KTtcbnZhciBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIiAvKiBURVhUX01FU1NBR0VfQ09OVEVOVCAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIGRlbHRhOiB6Mi5zdHJpbmcoKS5yZWZpbmUoKHMpID0+IHMubGVuZ3RoID4gMCwgXCJEZWx0YSBtdXN0IG5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIilcbn0pO1xudmFyIFRleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRFWFRfTUVTU0FHRV9FTkRcIiAvKiBURVhUX01FU1NBR0VfRU5EICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgVG9vbENhbGxTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfU1RBUlRcIiAvKiBUT09MX0NBTExfU1RBUlQgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKSxcbiAgdG9vbENhbGxOYW1lOiB6Mi5zdHJpbmcoKSxcbiAgcGFyZW50TWVzc2FnZUlkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sQ2FsbEFyZ3NFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX0FSR1NcIiAvKiBUT09MX0NBTExfQVJHUyAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpLFxuICBkZWx0YTogejIuc3RyaW5nKClcbn0pO1xudmFyIFRvb2xDYWxsRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9FTkRcIiAvKiBUT09MX0NBTExfRU5EICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKClcbn0pO1xudmFyIFN0YXRlU25hcHNob3RFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RBVEVfU05BUFNIT1RcIiAvKiBTVEFURV9TTkFQU0hPVCAqLyksXG4gIHNuYXBzaG90OiBTdGF0ZVNjaGVtYVxufSk7XG52YXIgU3RhdGVEZWx0YUV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEFURV9ERUxUQVwiIC8qIFNUQVRFX0RFTFRBICovKSxcbiAgZGVsdGE6IHoyLmFycmF5KHoyLmFueSgpKVxuICAvLyBKU09OIFBhdGNoIChSRkMgNjkwMilcbn0pO1xudmFyIE1lc3NhZ2VzU25hcHNob3RFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiTUVTU0FHRVNfU05BUFNIT1RcIiAvKiBNRVNTQUdFU19TTkFQU0hPVCAqLyksXG4gIG1lc3NhZ2VzOiB6Mi5hcnJheShNZXNzYWdlU2NoZW1hKVxufSk7XG52YXIgUmF3RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJBV1wiIC8qIFJBVyAqLyksXG4gIGV2ZW50OiB6Mi5hbnkoKSxcbiAgc291cmNlOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBDdXN0b21FdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiQ1VTVE9NXCIgLyogQ1VTVE9NICovKSxcbiAgbmFtZTogejIuc3RyaW5nKCksXG4gIHZhbHVlOiB6Mi5hbnkoKVxufSk7XG52YXIgUnVuU3RhcnRlZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fU1RBUlRFRFwiIC8qIFJVTl9TVEFSVEVEICovKSxcbiAgdGhyZWFkSWQ6IHoyLnN0cmluZygpLFxuICBydW5JZDogejIuc3RyaW5nKClcbn0pO1xudmFyIFJ1bkZpbmlzaGVkRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJVTl9GSU5JU0hFRFwiIC8qIFJVTl9GSU5JU0hFRCAqLyksXG4gIHRocmVhZElkOiB6Mi5zdHJpbmcoKSxcbiAgcnVuSWQ6IHoyLnN0cmluZygpXG59KTtcbnZhciBSdW5FcnJvckV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fRVJST1JcIiAvKiBSVU5fRVJST1IgKi8pLFxuICBtZXNzYWdlOiB6Mi5zdHJpbmcoKSxcbiAgY29kZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgU3RlcFN0YXJ0ZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RFUF9TVEFSVEVEXCIgLyogU1RFUF9TVEFSVEVEICovKSxcbiAgc3RlcE5hbWU6IHoyLnN0cmluZygpXG59KTtcbnZhciBTdGVwRmluaXNoZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RFUF9GSU5JU0hFRFwiIC8qIFNURVBfRklOSVNIRUQgKi8pLFxuICBzdGVwTmFtZTogejIuc3RyaW5nKClcbn0pO1xudmFyIEV2ZW50U2NoZW1hcyA9IHoyLmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICBUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbFN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsQXJnc0V2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEVuZEV2ZW50U2NoZW1hLFxuICBTdGF0ZVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIFN0YXRlRGVsdGFFdmVudFNjaGVtYSxcbiAgTWVzc2FnZXNTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBSYXdFdmVudFNjaGVtYSxcbiAgQ3VzdG9tRXZlbnRTY2hlbWEsXG4gIFJ1blN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgUnVuRmluaXNoZWRFdmVudFNjaGVtYSxcbiAgUnVuRXJyb3JFdmVudFNjaGVtYSxcbiAgU3RlcFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgU3RlcEZpbmlzaGVkRXZlbnRTY2hlbWFcbl0pO1xuZXhwb3J0IHtcbiAgQUdVSUVycm9yLFxuICBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hLFxuICBCYXNlTWVzc2FnZVNjaGVtYSxcbiAgQ29udGV4dFNjaGVtYSxcbiAgQ3VzdG9tRXZlbnRTY2hlbWEsXG4gIERldmVsb3Blck1lc3NhZ2VTY2hlbWEsXG4gIEV2ZW50U2NoZW1hcyxcbiAgRXZlbnRUeXBlLFxuICBGdW5jdGlvbkNhbGxTY2hlbWEsXG4gIE1lc3NhZ2VTY2hlbWEsXG4gIE1lc3NhZ2VzU25hcHNob3RFdmVudFNjaGVtYSxcbiAgUmF3RXZlbnRTY2hlbWEsXG4gIFJvbGVTY2hlbWEsXG4gIFJ1bkFnZW50SW5wdXRTY2hlbWEsXG4gIFJ1bkVycm9yRXZlbnRTY2hlbWEsXG4gIFJ1bkVycm9yU2NoZW1hLFxuICBSdW5GaW5pc2hlZEV2ZW50U2NoZW1hLFxuICBSdW5GaW5pc2hlZFNjaGVtYSxcbiAgUnVuU3RhcnRlZEV2ZW50U2NoZW1hLFxuICBSdW5TdGFydGVkU2NoZW1hLFxuICBTdGF0ZURlbHRhRXZlbnRTY2hlbWEsXG4gIFN0YXRlU2NoZW1hLFxuICBTdGF0ZVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIFN0ZXBGaW5pc2hlZEV2ZW50U2NoZW1hLFxuICBTdGVwRmluaXNoZWRTY2hlbWEsXG4gIFN0ZXBTdGFydGVkRXZlbnRTY2hlbWEsXG4gIFN0ZXBTdGFydGVkU2NoZW1hLFxuICBTeXN0ZW1NZXNzYWdlU2NoZW1hLFxuICBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEFyZ3NFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxFbmRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xDYWxsU3RhcnRFdmVudFNjaGVtYSxcbiAgVG9vbE1lc3NhZ2VTY2hlbWEsXG4gIFRvb2xTY2hlbWEsXG4gIFVzZXJNZXNzYWdlU2NoZW1hXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@ag-ui/proto/dist/index.mjs":
/*!**************************************************!*\
  !*** ./node_modules/@ag-ui/proto/dist/index.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUI_MEDIA_TYPE: () => (/* binding */ AGUI_MEDIA_TYPE),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bufbuild/protobuf/wire */ \"(ssr)/./node_modules/@bufbuild/protobuf/dist/esm/wire/binary-encoding.js\");\n// src/proto.ts\n\n\n// src/generated/events.ts\n\n\n// src/generated/google/protobuf/struct.ts\n\nfunction createBaseStruct() {\n  return { fields: {} };\n}\nvar Struct = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    Object.entries(message.fields).forEach(([key, value]) => {\n      if (value !== void 0) {\n        Struct_FieldsEntry.encode({ key, value }, writer.uint32(10).fork()).join();\n      }\n    });\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          const entry1 = Struct_FieldsEntry.decode(reader, reader.uint32());\n          if (entry1.value !== void 0) {\n            message.fields[entry1.key] = entry1.value;\n          }\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStruct();\n    message.fields = Object.entries((_a = object.fields) != null ? _a : {}).reduce(\n      (acc, [key, value]) => {\n        if (value !== void 0) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {}\n    );\n    return message;\n  },\n  wrap(object) {\n    const struct = createBaseStruct();\n    if (object !== void 0) {\n      for (const key of Object.keys(object)) {\n        struct.fields[key] = object[key];\n      }\n    }\n    return struct;\n  },\n  unwrap(message) {\n    const object = {};\n    if (message.fields) {\n      for (const key of Object.keys(message.fields)) {\n        object[key] = message.fields[key];\n      }\n    }\n    return object;\n  }\n};\nfunction createBaseStruct_FieldsEntry() {\n  return { key: \"\", value: void 0 };\n}\nvar Struct_FieldsEntry = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.key !== \"\") {\n      writer.uint32(10).string(message.key);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct_FieldsEntry();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.key = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct_FieldsEntry.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseStruct_FieldsEntry();\n    message.key = (_a = object.key) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseValue() {\n  return {\n    nullValue: void 0,\n    numberValue: void 0,\n    stringValue: void 0,\n    boolValue: void 0,\n    structValue: void 0,\n    listValue: void 0\n  };\n}\nvar Value = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.nullValue !== void 0) {\n      writer.uint32(8).int32(message.nullValue);\n    }\n    if (message.numberValue !== void 0) {\n      writer.uint32(17).double(message.numberValue);\n    }\n    if (message.stringValue !== void 0) {\n      writer.uint32(26).string(message.stringValue);\n    }\n    if (message.boolValue !== void 0) {\n      writer.uint32(32).bool(message.boolValue);\n    }\n    if (message.structValue !== void 0) {\n      Struct.encode(Struct.wrap(message.structValue), writer.uint32(42).fork()).join();\n    }\n    if (message.listValue !== void 0) {\n      ListValue.encode(ListValue.wrap(message.listValue), writer.uint32(50).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.nullValue = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 17) {\n            break;\n          }\n          message.numberValue = reader.double();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.stringValue = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 32) {\n            break;\n          }\n          message.boolValue = reader.bool();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.structValue = Struct.unwrap(Struct.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.listValue = ListValue.unwrap(ListValue.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Value.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f;\n    const message = createBaseValue();\n    message.nullValue = (_a = object.nullValue) != null ? _a : void 0;\n    message.numberValue = (_b = object.numberValue) != null ? _b : void 0;\n    message.stringValue = (_c = object.stringValue) != null ? _c : void 0;\n    message.boolValue = (_d = object.boolValue) != null ? _d : void 0;\n    message.structValue = (_e = object.structValue) != null ? _e : void 0;\n    message.listValue = (_f = object.listValue) != null ? _f : void 0;\n    return message;\n  },\n  wrap(value) {\n    const result = createBaseValue();\n    if (value === null) {\n      result.nullValue = 0 /* NULL_VALUE */;\n    } else if (typeof value === \"boolean\") {\n      result.boolValue = value;\n    } else if (typeof value === \"number\") {\n      result.numberValue = value;\n    } else if (typeof value === \"string\") {\n      result.stringValue = value;\n    } else if (globalThis.Array.isArray(value)) {\n      result.listValue = value;\n    } else if (typeof value === \"object\") {\n      result.structValue = value;\n    } else if (typeof value !== \"undefined\") {\n      throw new globalThis.Error(\"Unsupported any value type: \" + typeof value);\n    }\n    return result;\n  },\n  unwrap(message) {\n    if (message.stringValue !== void 0) {\n      return message.stringValue;\n    } else if ((message == null ? void 0 : message.numberValue) !== void 0) {\n      return message.numberValue;\n    } else if ((message == null ? void 0 : message.boolValue) !== void 0) {\n      return message.boolValue;\n    } else if ((message == null ? void 0 : message.structValue) !== void 0) {\n      return message.structValue;\n    } else if ((message == null ? void 0 : message.listValue) !== void 0) {\n      return message.listValue;\n    } else if ((message == null ? void 0 : message.nullValue) !== void 0) {\n      return null;\n    }\n    return void 0;\n  }\n};\nfunction createBaseListValue() {\n  return { values: [] };\n}\nvar ListValue = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    for (const v of message.values) {\n      Value.encode(Value.wrap(v), writer.uint32(10).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseListValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.values.push(Value.unwrap(Value.decode(reader, reader.uint32())));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ListValue.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseListValue();\n    message.values = ((_a = object.values) == null ? void 0 : _a.map((e) => e)) || [];\n    return message;\n  },\n  wrap(array) {\n    const result = createBaseListValue();\n    result.values = array != null ? array : [];\n    return result;\n  },\n  unwrap(message) {\n    if ((message == null ? void 0 : message.hasOwnProperty(\"values\")) && globalThis.Array.isArray(message.values)) {\n      return message.values;\n    } else {\n      return message;\n    }\n  }\n};\n\n// src/generated/patch.ts\n\nvar JsonPatchOperationType = /* @__PURE__ */ ((JsonPatchOperationType2) => {\n  JsonPatchOperationType2[JsonPatchOperationType2[\"ADD\"] = 0] = \"ADD\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REMOVE\"] = 1] = \"REMOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REPLACE\"] = 2] = \"REPLACE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"MOVE\"] = 3] = \"MOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"COPY\"] = 4] = \"COPY\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"TEST\"] = 5] = \"TEST\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return JsonPatchOperationType2;\n})(JsonPatchOperationType || {});\nfunction createBaseJsonPatchOperation() {\n  return { op: 0, path: \"\", from: void 0, value: void 0 };\n}\nvar JsonPatchOperation = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.op !== 0) {\n      writer.uint32(8).int32(message.op);\n    }\n    if (message.path !== \"\") {\n      writer.uint32(18).string(message.path);\n    }\n    if (message.from !== void 0) {\n      writer.uint32(26).string(message.from);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseJsonPatchOperation();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.op = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.path = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.from = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return JsonPatchOperation.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d;\n    const message = createBaseJsonPatchOperation();\n    message.op = (_a = object.op) != null ? _a : 0;\n    message.path = (_b = object.path) != null ? _b : \"\";\n    message.from = (_c = object.from) != null ? _c : void 0;\n    message.value = (_d = object.value) != null ? _d : void 0;\n    return message;\n  }\n};\n\n// src/generated/types.ts\n\nfunction createBaseToolCall() {\n  return { id: \"\", type: \"\", function: void 0 };\n}\nvar ToolCall = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.type !== \"\") {\n      writer.uint32(18).string(message.type);\n    }\n    if (message.function !== void 0) {\n      ToolCall_Function.encode(message.function, writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.type = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.function = ToolCall_Function.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.type = (_b = object.type) != null ? _b : \"\";\n    message.function = object.function !== void 0 && object.function !== null ? ToolCall_Function.fromPartial(object.function) : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCall_Function() {\n  return { name: \"\", arguments: \"\" };\n}\nvar ToolCall_Function = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.name !== \"\") {\n      writer.uint32(10).string(message.name);\n    }\n    if (message.arguments !== \"\") {\n      writer.uint32(18).string(message.arguments);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall_Function();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.arguments = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall_Function.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall_Function();\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.arguments = (_b = object.arguments) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseMessage() {\n  return { id: \"\", role: \"\", content: void 0, name: void 0, toolCalls: [], toolCallId: void 0 };\n}\nvar Message = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.role !== \"\") {\n      writer.uint32(18).string(message.role);\n    }\n    if (message.content !== void 0) {\n      writer.uint32(26).string(message.content);\n    }\n    if (message.name !== void 0) {\n      writer.uint32(34).string(message.name);\n    }\n    for (const v of message.toolCalls) {\n      ToolCall.encode(v, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallId !== void 0) {\n      writer.uint32(50).string(message.toolCallId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessage();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.content = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCalls.push(ToolCall.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Message.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f;\n    const message = createBaseMessage();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : \"\";\n    message.content = (_c = object.content) != null ? _c : void 0;\n    message.name = (_d = object.name) != null ? _d : void 0;\n    message.toolCalls = ((_e = object.toolCalls) == null ? void 0 : _e.map((e) => ToolCall.fromPartial(e))) || [];\n    message.toolCallId = (_f = object.toolCallId) != null ? _f : void 0;\n    return message;\n  }\n};\n\n// src/generated/events.ts\nvar EventType = /* @__PURE__ */ ((EventType3) => {\n  EventType3[EventType3[\"TEXT_MESSAGE_START\"] = 0] = \"TEXT_MESSAGE_START\";\n  EventType3[EventType3[\"TEXT_MESSAGE_CONTENT\"] = 1] = \"TEXT_MESSAGE_CONTENT\";\n  EventType3[EventType3[\"TEXT_MESSAGE_END\"] = 2] = \"TEXT_MESSAGE_END\";\n  EventType3[EventType3[\"TOOL_CALL_START\"] = 3] = \"TOOL_CALL_START\";\n  EventType3[EventType3[\"TOOL_CALL_ARGS\"] = 4] = \"TOOL_CALL_ARGS\";\n  EventType3[EventType3[\"TOOL_CALL_END\"] = 5] = \"TOOL_CALL_END\";\n  EventType3[EventType3[\"STATE_SNAPSHOT\"] = 6] = \"STATE_SNAPSHOT\";\n  EventType3[EventType3[\"STATE_DELTA\"] = 7] = \"STATE_DELTA\";\n  EventType3[EventType3[\"MESSAGES_SNAPSHOT\"] = 8] = \"MESSAGES_SNAPSHOT\";\n  EventType3[EventType3[\"RAW\"] = 9] = \"RAW\";\n  EventType3[EventType3[\"CUSTOM\"] = 10] = \"CUSTOM\";\n  EventType3[EventType3[\"RUN_STARTED\"] = 11] = \"RUN_STARTED\";\n  EventType3[EventType3[\"RUN_FINISHED\"] = 12] = \"RUN_FINISHED\";\n  EventType3[EventType3[\"RUN_ERROR\"] = 13] = \"RUN_ERROR\";\n  EventType3[EventType3[\"STEP_STARTED\"] = 14] = \"STEP_STARTED\";\n  EventType3[EventType3[\"STEP_FINISHED\"] = 15] = \"STEP_FINISHED\";\n  EventType3[EventType3[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return EventType3;\n})(EventType || {});\nfunction createBaseBaseEvent() {\n  return { type: 0, timestamp: void 0, rawEvent: void 0 };\n}\nvar BaseEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.type !== 0) {\n      writer.uint32(8).int32(message.type);\n    }\n    if (message.timestamp !== void 0) {\n      writer.uint32(16).int64(message.timestamp);\n    }\n    if (message.rawEvent !== void 0) {\n      Value.encode(Value.wrap(message.rawEvent), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.type = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 16) {\n            break;\n          }\n          message.timestamp = longToNumber(reader.int64());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.rawEvent = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return BaseEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseBaseEvent();\n    message.type = (_a = object.type) != null ? _a : 0;\n    message.timestamp = (_b = object.timestamp) != null ? _b : void 0;\n    message.rawEvent = (_c = object.rawEvent) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageStartEvent() {\n  return { baseEvent: void 0, messageId: \"\", role: void 0 };\n}\nvar TextMessageStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== void 0) {\n      writer.uint32(26).string(message.role);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageContentEvent() {\n  return { baseEvent: void 0, messageId: \"\", delta: \"\" };\n}\nvar TextMessageContentEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageContentEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageContentEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageContentEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseTextMessageEndEvent() {\n  return { baseEvent: void 0, messageId: \"\" };\n}\nvar TextMessageEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseTextMessageEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallStartEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", toolCallName: \"\", parentMessageId: void 0 };\n}\nvar ToolCallStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== \"\") {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== void 0) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.parentMessageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseToolCallStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.toolCallName = (_b = object.toolCallName) != null ? _b : \"\";\n    message.parentMessageId = (_c = object.parentMessageId) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCallArgsEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", delta: \"\" };\n}\nvar ToolCallArgsEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallArgsEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallArgsEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCallArgsEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallEndEvent() {\n  return { baseEvent: void 0, toolCallId: \"\" };\n}\nvar ToolCallEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseToolCallEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStateSnapshotEvent() {\n  return { baseEvent: void 0, snapshot: void 0 };\n}\nvar StateSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.snapshot !== void 0) {\n      Value.encode(Value.wrap(message.snapshot), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.snapshot = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.snapshot = (_a = object.snapshot) != null ? _a : void 0;\n    return message;\n  }\n};\nfunction createBaseStateDeltaEvent() {\n  return { baseEvent: void 0, delta: [] };\n}\nvar StateDeltaEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.delta) {\n      JsonPatchOperation.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateDeltaEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.delta.push(JsonPatchOperation.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateDeltaEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateDeltaEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.delta = ((_a = object.delta) == null ? void 0 : _a.map((e) => JsonPatchOperation.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseMessagesSnapshotEvent() {\n  return { baseEvent: void 0, messages: [] };\n}\nvar MessagesSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.messages) {\n      Message.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessagesSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messages.push(Message.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return MessagesSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseMessagesSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messages = ((_a = object.messages) == null ? void 0 : _a.map((e) => Message.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseRawEvent() {\n  return { baseEvent: void 0, event: void 0, source: void 0 };\n}\nvar RawEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.event !== void 0) {\n      Value.encode(Value.wrap(message.event), writer.uint32(18).fork()).join();\n    }\n    if (message.source !== void 0) {\n      writer.uint32(26).string(message.source);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRawEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.event = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.source = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RawEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRawEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.event = (_a = object.event) != null ? _a : void 0;\n    message.source = (_b = object.source) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseCustomEvent() {\n  return { baseEvent: void 0, name: \"\", value: void 0 };\n}\nvar CustomEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.name !== \"\") {\n      writer.uint32(18).string(message.name);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseCustomEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return CustomEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseCustomEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseRunStartedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\" };\n}\nvar RunStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseRunFinishedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\" };\n}\nvar RunFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseRunErrorEvent() {\n  return { baseEvent: void 0, code: void 0, message: \"\" };\n}\nvar RunErrorEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.code !== void 0) {\n      writer.uint32(18).string(message.code);\n    }\n    if (message.message !== \"\") {\n      writer.uint32(26).string(message.message);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunErrorEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.code = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.message = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunErrorEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunErrorEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.code = (_a = object.code) != null ? _a : void 0;\n    message.message = (_b = object.message) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseStepStartedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStepFinishedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseEvent() {\n  return {\n    textMessageStart: void 0,\n    textMessageContent: void 0,\n    textMessageEnd: void 0,\n    toolCallStart: void 0,\n    toolCallArgs: void 0,\n    toolCallEnd: void 0,\n    stateSnapshot: void 0,\n    stateDelta: void 0,\n    messagesSnapshot: void 0,\n    raw: void 0,\n    custom: void 0,\n    runStarted: void 0,\n    runFinished: void 0,\n    runError: void 0,\n    stepStarted: void 0,\n    stepFinished: void 0\n  };\n}\nvar Event = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.textMessageStart !== void 0) {\n      TextMessageStartEvent.encode(message.textMessageStart, writer.uint32(10).fork()).join();\n    }\n    if (message.textMessageContent !== void 0) {\n      TextMessageContentEvent.encode(message.textMessageContent, writer.uint32(18).fork()).join();\n    }\n    if (message.textMessageEnd !== void 0) {\n      TextMessageEndEvent.encode(message.textMessageEnd, writer.uint32(26).fork()).join();\n    }\n    if (message.toolCallStart !== void 0) {\n      ToolCallStartEvent.encode(message.toolCallStart, writer.uint32(34).fork()).join();\n    }\n    if (message.toolCallArgs !== void 0) {\n      ToolCallArgsEvent.encode(message.toolCallArgs, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallEnd !== void 0) {\n      ToolCallEndEvent.encode(message.toolCallEnd, writer.uint32(50).fork()).join();\n    }\n    if (message.stateSnapshot !== void 0) {\n      StateSnapshotEvent.encode(message.stateSnapshot, writer.uint32(58).fork()).join();\n    }\n    if (message.stateDelta !== void 0) {\n      StateDeltaEvent.encode(message.stateDelta, writer.uint32(66).fork()).join();\n    }\n    if (message.messagesSnapshot !== void 0) {\n      MessagesSnapshotEvent.encode(message.messagesSnapshot, writer.uint32(74).fork()).join();\n    }\n    if (message.raw !== void 0) {\n      RawEvent.encode(message.raw, writer.uint32(82).fork()).join();\n    }\n    if (message.custom !== void 0) {\n      CustomEvent.encode(message.custom, writer.uint32(90).fork()).join();\n    }\n    if (message.runStarted !== void 0) {\n      RunStartedEvent.encode(message.runStarted, writer.uint32(98).fork()).join();\n    }\n    if (message.runFinished !== void 0) {\n      RunFinishedEvent.encode(message.runFinished, writer.uint32(106).fork()).join();\n    }\n    if (message.runError !== void 0) {\n      RunErrorEvent.encode(message.runError, writer.uint32(114).fork()).join();\n    }\n    if (message.stepStarted !== void 0) {\n      StepStartedEvent.encode(message.stepStarted, writer.uint32(122).fork()).join();\n    }\n    if (message.stepFinished !== void 0) {\n      StepFinishedEvent.encode(message.stepFinished, writer.uint32(130).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    let end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.textMessageStart = TextMessageStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.textMessageContent = TextMessageContentEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.textMessageEnd = TextMessageEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.toolCallStart = ToolCallStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCallArgs = ToolCallArgsEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallEnd = ToolCallEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n          message.stateSnapshot = StateSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 8: {\n          if (tag !== 66) {\n            break;\n          }\n          message.stateDelta = StateDeltaEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 9: {\n          if (tag !== 74) {\n            break;\n          }\n          message.messagesSnapshot = MessagesSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 10: {\n          if (tag !== 82) {\n            break;\n          }\n          message.raw = RawEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 11: {\n          if (tag !== 90) {\n            break;\n          }\n          message.custom = CustomEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 12: {\n          if (tag !== 98) {\n            break;\n          }\n          message.runStarted = RunStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 13: {\n          if (tag !== 106) {\n            break;\n          }\n          message.runFinished = RunFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 14: {\n          if (tag !== 114) {\n            break;\n          }\n          message.runError = RunErrorEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 15: {\n          if (tag !== 122) {\n            break;\n          }\n          message.stepStarted = StepStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 16: {\n          if (tag !== 130) {\n            break;\n          }\n          message.stepFinished = StepFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Event.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    const message = createBaseEvent();\n    message.textMessageStart = object.textMessageStart !== void 0 && object.textMessageStart !== null ? TextMessageStartEvent.fromPartial(object.textMessageStart) : void 0;\n    message.textMessageContent = object.textMessageContent !== void 0 && object.textMessageContent !== null ? TextMessageContentEvent.fromPartial(object.textMessageContent) : void 0;\n    message.textMessageEnd = object.textMessageEnd !== void 0 && object.textMessageEnd !== null ? TextMessageEndEvent.fromPartial(object.textMessageEnd) : void 0;\n    message.toolCallStart = object.toolCallStart !== void 0 && object.toolCallStart !== null ? ToolCallStartEvent.fromPartial(object.toolCallStart) : void 0;\n    message.toolCallArgs = object.toolCallArgs !== void 0 && object.toolCallArgs !== null ? ToolCallArgsEvent.fromPartial(object.toolCallArgs) : void 0;\n    message.toolCallEnd = object.toolCallEnd !== void 0 && object.toolCallEnd !== null ? ToolCallEndEvent.fromPartial(object.toolCallEnd) : void 0;\n    message.stateSnapshot = object.stateSnapshot !== void 0 && object.stateSnapshot !== null ? StateSnapshotEvent.fromPartial(object.stateSnapshot) : void 0;\n    message.stateDelta = object.stateDelta !== void 0 && object.stateDelta !== null ? StateDeltaEvent.fromPartial(object.stateDelta) : void 0;\n    message.messagesSnapshot = object.messagesSnapshot !== void 0 && object.messagesSnapshot !== null ? MessagesSnapshotEvent.fromPartial(object.messagesSnapshot) : void 0;\n    message.raw = object.raw !== void 0 && object.raw !== null ? RawEvent.fromPartial(object.raw) : void 0;\n    message.custom = object.custom !== void 0 && object.custom !== null ? CustomEvent.fromPartial(object.custom) : void 0;\n    message.runStarted = object.runStarted !== void 0 && object.runStarted !== null ? RunStartedEvent.fromPartial(object.runStarted) : void 0;\n    message.runFinished = object.runFinished !== void 0 && object.runFinished !== null ? RunFinishedEvent.fromPartial(object.runFinished) : void 0;\n    message.runError = object.runError !== void 0 && object.runError !== null ? RunErrorEvent.fromPartial(object.runError) : void 0;\n    message.stepStarted = object.stepStarted !== void 0 && object.stepStarted !== null ? StepStartedEvent.fromPartial(object.stepStarted) : void 0;\n    message.stepFinished = object.stepFinished !== void 0 && object.stepFinished !== null ? StepFinishedEvent.fromPartial(object.stepFinished) : void 0;\n    return message;\n  }\n};\nfunction longToNumber(int64) {\n  const num = globalThis.Number(int64.toString());\n  if (num > globalThis.Number.MAX_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n  }\n  if (num < globalThis.Number.MIN_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is smaller than Number.MIN_SAFE_INTEGER\");\n  }\n  return num;\n}\n\n// src/proto.ts\nfunction toCamelCase(str) {\n  return str.toLowerCase().replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\nfunction encode(event) {\n  const oneofField = toCamelCase(event.type);\n  const { type, timestamp, rawEvent, ...rest } = event;\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    rest.messages = rest.messages.map((message) => {\n      const untypedMessage = message;\n      if (untypedMessage.toolCalls === void 0) {\n        return { ...message, toolCalls: [] };\n      }\n      return message;\n    });\n  }\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    rest.delta = rest.delta.map((operation) => ({\n      ...operation,\n      op: JsonPatchOperationType[operation.op.toUpperCase()]\n    }));\n  }\n  const eventMessage = {\n    [oneofField]: {\n      baseEvent: {\n        type: EventType[event.type],\n        timestamp,\n        rawEvent\n      },\n      ...rest\n    }\n  };\n  return Event.encode(eventMessage).finish();\n}\nfunction decode(data) {\n  var _a;\n  const event = Event.decode(data);\n  const decoded = Object.values(event).find((value) => value !== void 0);\n  if (!decoded) {\n    throw new Error(\"Invalid event\");\n  }\n  decoded.type = EventType[decoded.baseEvent.type];\n  decoded.timestamp = decoded.baseEvent.timestamp;\n  decoded.rawEvent = decoded.baseEvent.rawEvent;\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    for (const message of decoded.messages) {\n      const untypedMessage = message;\n      if (((_a = untypedMessage.toolCalls) == null ? void 0 : _a.length) === 0) {\n        untypedMessage.toolCalls = void 0;\n      }\n    }\n  }\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    for (const operation of decoded.delta) {\n      operation.op = JsonPatchOperationType[operation.op].toLowerCase();\n      Object.keys(operation).forEach((key) => {\n        if (operation[key] === void 0) {\n          delete operation[key];\n        }\n      });\n    }\n  }\n  Object.keys(decoded).forEach((key) => {\n    if (decoded[key] === void 0) {\n      delete decoded[key];\n    }\n  });\n  return _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(decoded);\n}\n\n// src/index.ts\nvar AGUI_MEDIA_TYPE = \"application/vnd.ag-ui.event+proto\";\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFnLXVpL3Byb3RvL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDb0U7O0FBRXBFO0FBQ3VHOztBQUV2RztBQUNxRTtBQUNyRTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFZO0FBQzNDO0FBQ0E7QUFDQSxvQ0FBb0MsWUFBWTtBQUNoRDtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBWSxlQUFlLGlFQUFZO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0RBQXNEO0FBQ3RELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQVksZUFBZSxpRUFBWTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0VBQWtFO0FBQ2xFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpRUFBWTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBWSxlQUFlLGlFQUFZO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFEQUFxRDtBQUNyRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBWTtB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QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscUVBQXFFO0FBQ3JFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdUVBQXVFO0FBQ3ZFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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K0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwyREFBMkQ7QUFDM0QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwrREFBK0Q7QUFDL0QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxnRUFBZ0U7QUFDaEUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSw2REFBNkQ7QUFDN0QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0VBQWdFO0FBQ2hFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpRUFBaUU7QUFDakUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFEQUFxRDtBQUNyRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxQ0FBcUM7QUFDL0MsZUFBZSxrREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWUsa0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMscURBQVk7QUFDckI7O0FBRUE7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL210YWhhc3lsbXovRGVza3RvcC91cHN0YXNoL21hc3RyYS93aXRoQXBpL25vZGVfbW9kdWxlcy9AYWctdWkvcHJvdG8vZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3Byb3RvLnRzXG5pbXBvcnQgeyBFdmVudFNjaGVtYXMsIEV2ZW50VHlwZSBhcyBFdmVudFR5cGUyIH0gZnJvbSBcIkBhZy11aS9jb3JlXCI7XG5cbi8vIHNyYy9nZW5lcmF0ZWQvZXZlbnRzLnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIgYXMgQmluYXJ5UmVhZGVyNCwgQmluYXJ5V3JpdGVyIGFzIEJpbmFyeVdyaXRlcjQgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcblxuLy8gc3JjL2dlbmVyYXRlZC9nb29nbGUvcHJvdG9idWYvc3RydWN0LnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIsIEJpbmFyeVdyaXRlciB9IGZyb20gXCJAYnVmYnVpbGQvcHJvdG9idWYvd2lyZVwiO1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0cnVjdCgpIHtcbiAgcmV0dXJuIHsgZmllbGRzOiB7fSB9O1xufVxudmFyIFN0cnVjdCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIoKSkge1xuICAgIE9iamVjdC5lbnRyaWVzKG1lc3NhZ2UuZmllbGRzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIFN0cnVjdF9GaWVsZHNFbnRyeS5lbmNvZGUoeyBrZXksIHZhbHVlIH0sIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZW50cnkxID0gU3RydWN0X0ZpZWxkc0VudHJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgaWYgKGVudHJ5MS52YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmZpZWxkc1tlbnRyeTEua2V5XSA9IGVudHJ5MS52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdHJ1Y3QuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgbWVzc2FnZS5maWVsZHMgPSBPYmplY3QuZW50cmllcygoX2EgPSBvYmplY3QuZmllbGRzKSAhPSBudWxsID8gX2EgOiB7fSkucmVkdWNlKFxuICAgICAgKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgd3JhcChvYmplY3QpIHtcbiAgICBjb25zdCBzdHJ1Y3QgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgaWYgKG9iamVjdCAhPT0gdm9pZCAwKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICAgIHN0cnVjdC5maWVsZHNba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RydWN0O1xuICB9LFxuICB1bndyYXAobWVzc2FnZSkge1xuICAgIGNvbnN0IG9iamVjdCA9IHt9O1xuICAgIGlmIChtZXNzYWdlLmZpZWxkcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWVzc2FnZS5maWVsZHMpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gbWVzc2FnZS5maWVsZHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdHJ1Y3RfRmllbGRzRW50cnkoKSB7XG4gIHJldHVybiB7IGtleTogXCJcIiwgdmFsdWU6IHZvaWQgMCB9O1xufVxudmFyIFN0cnVjdF9GaWVsZHNFbnRyeSA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIoKSkge1xuICAgIGlmIChtZXNzYWdlLmtleSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uua2V5KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS52YWx1ZSksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyKGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cnVjdF9GaWVsZHNFbnRyeSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uua2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFN0cnVjdF9GaWVsZHNFbnRyeS5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0X0ZpZWxkc0VudHJ5KCk7XG4gICAgbWVzc2FnZS5rZXkgPSAoX2EgPSBvYmplY3Qua2V5KSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudmFsdWUgPSAoX2IgPSBvYmplY3QudmFsdWUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWYWx1ZSgpIHtcbiAgcmV0dXJuIHtcbiAgICBudWxsVmFsdWU6IHZvaWQgMCxcbiAgICBudW1iZXJWYWx1ZTogdm9pZCAwLFxuICAgIHN0cmluZ1ZhbHVlOiB2b2lkIDAsXG4gICAgYm9vbFZhbHVlOiB2b2lkIDAsXG4gICAgc3RydWN0VmFsdWU6IHZvaWQgMCxcbiAgICBsaXN0VmFsdWU6IHZvaWQgMFxuICB9O1xufVxudmFyIFZhbHVlID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7XG4gICAgaWYgKG1lc3NhZ2UubnVsbFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5udWxsVmFsdWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5udW1iZXJWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE3KS5kb3VibGUobWVzc2FnZS5udW1iZXJWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0cmluZ1ZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnN0cmluZ1ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuYm9vbFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS5ib29sVmFsdWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdHJ1Y3RWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBTdHJ1Y3QuZW5jb2RlKFN0cnVjdC53cmFwKG1lc3NhZ2Uuc3RydWN0VmFsdWUpLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubGlzdFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIExpc3RWYWx1ZS5lbmNvZGUoTGlzdFZhbHVlLndyYXAobWVzc2FnZS5saXN0VmFsdWUpLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VWYWx1ZSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5udWxsVmFsdWUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxNykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubnVtYmVyVmFsdWUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0cmluZ1ZhbHVlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDMyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ib29sVmFsdWUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDQyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdHJ1Y3RWYWx1ZSA9IFN0cnVjdC51bndyYXAoU3RydWN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDUwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5saXN0VmFsdWUgPSBMaXN0VmFsdWUudW53cmFwKExpc3RWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFZhbHVlLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVmFsdWUoKTtcbiAgICBtZXNzYWdlLm51bGxWYWx1ZSA9IChfYSA9IG9iamVjdC5udWxsVmFsdWUpICE9IG51bGwgPyBfYSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm51bWJlclZhbHVlID0gKF9iID0gb2JqZWN0Lm51bWJlclZhbHVlKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdHJpbmdWYWx1ZSA9IChfYyA9IG9iamVjdC5zdHJpbmdWYWx1ZSkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuYm9vbFZhbHVlID0gKF9kID0gb2JqZWN0LmJvb2xWYWx1ZSkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RydWN0VmFsdWUgPSAoX2UgPSBvYmplY3Quc3RydWN0VmFsdWUpICE9IG51bGwgPyBfZSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmxpc3RWYWx1ZSA9IChfZiA9IG9iamVjdC5saXN0VmFsdWUpICE9IG51bGwgPyBfZiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgd3JhcCh2YWx1ZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJhc2VWYWx1ZSgpO1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmVzdWx0Lm51bGxWYWx1ZSA9IDAgLyogTlVMTF9WQUxVRSAqLztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJlc3VsdC5ib29sVmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmVzdWx0Lm51bWJlclZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJlc3VsdC5zdHJpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoZ2xvYmFsVGhpcy5BcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmVzdWx0Lmxpc3RWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXN1bHQuc3RydWN0VmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXCJVbnN1cHBvcnRlZCBhbnkgdmFsdWUgdHlwZTogXCIgKyB0eXBlb2YgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuICB1bndyYXAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlLnN0cmluZ1ZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLnN0cmluZ1ZhbHVlO1xuICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UubnVtYmVyVmFsdWUpICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLm51bWJlclZhbHVlO1xuICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UuYm9vbFZhbHVlKSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS5ib29sVmFsdWU7XG4gICAgfSBlbHNlIGlmICgobWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5zdHJ1Y3RWYWx1ZSkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2Uuc3RydWN0VmFsdWU7XG4gICAgfSBlbHNlIGlmICgobWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5saXN0VmFsdWUpICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLmxpc3RWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLm51bGxWYWx1ZSkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdFZhbHVlKCkge1xuICByZXR1cm4geyB2YWx1ZXM6IFtdIH07XG59XG52YXIgTGlzdFZhbHVlID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7XG4gICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UudmFsdWVzKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcCh2KSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFZhbHVlKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZXMucHVzaChWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gTGlzdFZhbHVlLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RWYWx1ZSgpO1xuICAgIG1lc3NhZ2UudmFsdWVzID0gKChfYSA9IG9iamVjdC52YWx1ZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgd3JhcChhcnJheSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJhc2VMaXN0VmFsdWUoKTtcbiAgICByZXN1bHQudmFsdWVzID0gYXJyYXkgIT0gbnVsbCA/IGFycmF5IDogW107XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgdW53cmFwKG1lc3NhZ2UpIHtcbiAgICBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZXNcIikpICYmIGdsb2JhbFRoaXMuQXJyYXkuaXNBcnJheShtZXNzYWdlLnZhbHVlcykpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLnZhbHVlcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvZ2VuZXJhdGVkL3BhdGNoLnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIgYXMgQmluYXJ5UmVhZGVyMiwgQmluYXJ5V3JpdGVyIGFzIEJpbmFyeVdyaXRlcjIgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcbnZhciBKc29uUGF0Y2hPcGVyYXRpb25UeXBlID0gLyogQF9fUFVSRV9fICovICgoSnNvblBhdGNoT3BlcmF0aW9uVHlwZTIpID0+IHtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJBRERcIl0gPSAwXSA9IFwiQUREXCI7XG4gIEpzb25QYXRjaE9wZXJhdGlvblR5cGUyW0pzb25QYXRjaE9wZXJhdGlvblR5cGUyW1wiUkVNT1ZFXCJdID0gMV0gPSBcIlJFTU9WRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlJFUExBQ0VcIl0gPSAyXSA9IFwiUkVQTEFDRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIk1PVkVcIl0gPSAzXSA9IFwiTU9WRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIkNPUFlcIl0gPSA0XSA9IFwiQ09QWVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlRFU1RcIl0gPSA1XSA9IFwiVEVTVFwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG4gIHJldHVybiBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMjtcbn0pKEpzb25QYXRjaE9wZXJhdGlvblR5cGUgfHwge30pO1xuZnVuY3Rpb24gY3JlYXRlQmFzZUpzb25QYXRjaE9wZXJhdGlvbigpIHtcbiAgcmV0dXJuIHsgb3A6IDAsIHBhdGg6IFwiXCIsIGZyb206IHZvaWQgMCwgdmFsdWU6IHZvaWQgMCB9O1xufVxudmFyIEpzb25QYXRjaE9wZXJhdGlvbiA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIyKCkpIHtcbiAgICBpZiAobWVzc2FnZS5vcCAhPT0gMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLm9wKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucGF0aCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UucGF0aCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmZyb20gIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuZnJvbSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2UudmFsdWUpLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjIgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIyKGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUpzb25QYXRjaE9wZXJhdGlvbigpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5vcCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5wYXRoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5mcm9tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIEpzb25QYXRjaE9wZXJhdGlvbi5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VKc29uUGF0Y2hPcGVyYXRpb24oKTtcbiAgICBtZXNzYWdlLm9wID0gKF9hID0gb2JqZWN0Lm9wKSAhPSBudWxsID8gX2EgOiAwO1xuICAgIG1lc3NhZ2UucGF0aCA9IChfYiA9IG9iamVjdC5wYXRoKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UuZnJvbSA9IChfYyA9IG9iamVjdC5mcm9tKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS52YWx1ZSA9IChfZCA9IG9iamVjdC52YWx1ZSkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuXG4vLyBzcmMvZ2VuZXJhdGVkL3R5cGVzLnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIgYXMgQmluYXJ5UmVhZGVyMywgQmluYXJ5V3JpdGVyIGFzIEJpbmFyeVdyaXRlcjMgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUb29sQ2FsbCgpIHtcbiAgcmV0dXJuIHsgaWQ6IFwiXCIsIHR5cGU6IFwiXCIsIGZ1bmN0aW9uOiB2b2lkIDAgfTtcbn1cbnZhciBUb29sQ2FsbCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIzKCkpIHtcbiAgICBpZiAobWVzc2FnZS5pZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50eXBlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZnVuY3Rpb24gIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxfRnVuY3Rpb24uZW5jb2RlKG1lc3NhZ2UuZnVuY3Rpb24sIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyMyA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjMoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGwoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5mdW5jdGlvbiA9IFRvb2xDYWxsX0Z1bmN0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGwoKTtcbiAgICBtZXNzYWdlLmlkID0gKF9hID0gb2JqZWN0LmlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudHlwZSA9IChfYiA9IG9iamVjdC50eXBlKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UuZnVuY3Rpb24gPSBvYmplY3QuZnVuY3Rpb24gIT09IHZvaWQgMCAmJiBvYmplY3QuZnVuY3Rpb24gIT09IG51bGwgPyBUb29sQ2FsbF9GdW5jdGlvbi5mcm9tUGFydGlhbChvYmplY3QuZnVuY3Rpb24pIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsX0Z1bmN0aW9uKCkge1xuICByZXR1cm4geyBuYW1lOiBcIlwiLCBhcmd1bWVudHM6IFwiXCIgfTtcbn1cbnZhciBUb29sQ2FsbF9GdW5jdGlvbiA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIzKCkpIHtcbiAgICBpZiAobWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuYXJndW1lbnRzICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5hcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyMyA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjMoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxfRnVuY3Rpb24oKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmFyZ3VtZW50cyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsX0Z1bmN0aW9uLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbF9GdW5jdGlvbigpO1xuICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UuYXJndW1lbnRzID0gKF9iID0gb2JqZWN0LmFyZ3VtZW50cykgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VNZXNzYWdlKCkge1xuICByZXR1cm4geyBpZDogXCJcIiwgcm9sZTogXCJcIiwgY29udGVudDogdm9pZCAwLCBuYW1lOiB2b2lkIDAsIHRvb2xDYWxsczogW10sIHRvb2xDYWxsSWQ6IHZvaWQgMCB9O1xufVxudmFyIE1lc3NhZ2UgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyMygpKSB7XG4gICAgaWYgKG1lc3NhZ2UuaWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmlkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuY29udGVudCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRvb2xDYWxscykge1xuICAgICAgVG9vbENhbGwuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyMyA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjMoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTWVzc2FnZSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJvbGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNDIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxscy5wdXNoKFRvb2xDYWxsLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDUwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gTWVzc2FnZS5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2UoKTtcbiAgICBtZXNzYWdlLmlkID0gKF9hID0gb2JqZWN0LmlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2Uucm9sZSA9IChfYiA9IG9iamVjdC5yb2xlKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UuY29udGVudCA9IChfYyA9IG9iamVjdC5jb250ZW50KSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5uYW1lID0gKF9kID0gb2JqZWN0Lm5hbWUpICE9IG51bGwgPyBfZCA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxscyA9ICgoX2UgPSBvYmplY3QudG9vbENhbGxzKSA9PSBudWxsID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBUb29sQ2FsbC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfZiA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2YgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5cbi8vIHNyYy9nZW5lcmF0ZWQvZXZlbnRzLnRzXG52YXIgRXZlbnRUeXBlID0gLyogQF9fUFVSRV9fICovICgoRXZlbnRUeXBlMykgPT4ge1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJURVhUX01FU1NBR0VfU1RBUlRcIl0gPSAwXSA9IFwiVEVYVF9NRVNTQUdFX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRFWFRfTUVTU0FHRV9DT05URU5UXCJdID0gMV0gPSBcIlRFWFRfTUVTU0FHRV9DT05URU5UXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRFWFRfTUVTU0FHRV9FTkRcIl0gPSAyXSA9IFwiVEVYVF9NRVNTQUdFX0VORFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJUT09MX0NBTExfU1RBUlRcIl0gPSAzXSA9IFwiVE9PTF9DQUxMX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRPT0xfQ0FMTF9BUkdTXCJdID0gNF0gPSBcIlRPT0xfQ0FMTF9BUkdTXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRPT0xfQ0FMTF9FTkRcIl0gPSA1XSA9IFwiVE9PTF9DQUxMX0VORFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEFURV9TTkFQU0hPVFwiXSA9IDZdID0gXCJTVEFURV9TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEFURV9ERUxUQVwiXSA9IDddID0gXCJTVEFURV9ERUxUQVwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJNRVNTQUdFU19TTkFQU0hPVFwiXSA9IDhdID0gXCJNRVNTQUdFU19TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSQVdcIl0gPSA5XSA9IFwiUkFXXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIkNVU1RPTVwiXSA9IDEwXSA9IFwiQ1VTVE9NXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlJVTl9TVEFSVEVEXCJdID0gMTFdID0gXCJSVU5fU1RBUlRFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSVU5fRklOSVNIRURcIl0gPSAxMl0gPSBcIlJVTl9GSU5JU0hFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSVU5fRVJST1JcIl0gPSAxM10gPSBcIlJVTl9FUlJPUlwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEVQX1NUQVJURURcIl0gPSAxNF0gPSBcIlNURVBfU1RBUlRFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEVQX0ZJTklTSEVEXCJdID0gMTVdID0gXCJTVEVQX0ZJTklTSEVEXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG4gIHJldHVybiBFdmVudFR5cGUzO1xufSkoRXZlbnRUeXBlIHx8IHt9KTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VCYXNlRXZlbnQoKSB7XG4gIHJldHVybiB7IHR5cGU6IDAsIHRpbWVzdGFtcDogdm9pZCAwLCByYXdFdmVudDogdm9pZCAwIH07XG59XG52YXIgQmFzZUV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS50eXBlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDY0KG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucmF3RXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS5yYXdFdmVudCksIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQmFzZUV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucmF3RXZlbnQgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBCYXNlRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VCYXNlRXZlbnQoKTtcbiAgICBtZXNzYWdlLnR5cGUgPSAoX2EgPSBvYmplY3QudHlwZSkgIT0gbnVsbCA/IF9hIDogMDtcbiAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IChfYiA9IG9iamVjdC50aW1lc3RhbXApICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJhd0V2ZW50ID0gKF9jID0gb2JqZWN0LnJhd0V2ZW50KSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VTdGFydEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbWVzc2FnZUlkOiBcIlwiLCByb2xlOiB2b2lkIDAgfTtcbn1cbnZhciBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2VJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJvbGUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZVN0YXJ0RXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJvbGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRleHRNZXNzYWdlU3RhcnRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlSWQgPSAoX2EgPSBvYmplY3QubWVzc2FnZUlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2Uucm9sZSA9IChfYiA9IG9iamVjdC5yb2xlKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlSWQ6IFwiXCIsIGRlbHRhOiBcIlwiIH07XG59XG52YXIgVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2VJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmRlbHRhICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5kZWx0YSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUNvbnRlbnRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZGVsdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gKF9hID0gb2JqZWN0Lm1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLmRlbHRhID0gKF9iID0gb2JqZWN0LmRlbHRhKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRleHRNZXNzYWdlRW5kRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlSWQ6IFwiXCIgfTtcbn1cbnZhciBUZXh0TWVzc2FnZUVuZEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VFbmRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRleHRNZXNzYWdlRW5kRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VFbmRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlSWQgPSAoX2EgPSBvYmplY3QubWVzc2FnZUlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsU3RhcnRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHRvb2xDYWxsSWQ6IFwiXCIsIHRvb2xDYWxsTmFtZTogXCJcIiwgcGFyZW50TWVzc2FnZUlkOiB2b2lkIDAgfTtcbn1cbnZhciBUb29sQ2FsbFN0YXJ0RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxOYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbE5hbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsU3RhcnRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVG9vbENhbGxTdGFydEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxTdGFydEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSAoX2EgPSBvYmplY3QudG9vbENhbGxJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnRvb2xDYWxsTmFtZSA9IChfYiA9IG9iamVjdC50b29sQ2FsbE5hbWUpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgbWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgPSAoX2MgPSBvYmplY3QucGFyZW50TWVzc2FnZUlkKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVG9vbENhbGxBcmdzRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0b29sQ2FsbElkOiBcIlwiLCBkZWx0YTogXCJcIiB9O1xufVxudmFyIFRvb2xDYWxsQXJnc0V2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudG9vbENhbGxJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmRlbHRhICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5kZWx0YSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbEFyZ3NFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmRlbHRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVG9vbENhbGxBcmdzRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsQXJnc0V2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSAoX2EgPSBvYmplY3QudG9vbENhbGxJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLmRlbHRhID0gKF9iID0gb2JqZWN0LmRlbHRhKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsRW5kRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0b29sQ2FsbElkOiBcIlwiIH07XG59XG52YXIgVG9vbENhbGxFbmRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxFbmRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbEVuZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsRW5kRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfYSA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0YXRlU25hcHNob3RFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHNuYXBzaG90OiB2b2lkIDAgfTtcbn1cbnZhciBTdGF0ZVNuYXBzaG90RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zbmFwc2hvdCAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLnNuYXBzaG90KSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGF0ZVNuYXBzaG90RXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zbmFwc2hvdCA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFN0YXRlU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGF0ZVNuYXBzaG90RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc25hcHNob3QgPSAoX2EgPSBvYmplY3Quc25hcHNob3QpICE9IG51bGwgPyBfYSA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdGF0ZURlbHRhRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBkZWx0YTogW10gfTtcbn1cbnZhciBTdGF0ZURlbHRhRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5kZWx0YSkge1xuICAgICAgSnNvblBhdGNoT3BlcmF0aW9uLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlRGVsdGFFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmRlbHRhLnB1c2goSnNvblBhdGNoT3BlcmF0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RhdGVEZWx0YUV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlRGVsdGFFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5kZWx0YSA9ICgoX2EgPSBvYmplY3QuZGVsdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IEpzb25QYXRjaE9wZXJhdGlvbi5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZU1lc3NhZ2VzU25hcHNob3RFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIG1lc3NhZ2VzOiBbXSB9O1xufVxudmFyIE1lc3NhZ2VzU25hcHNob3RFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLm1lc3NhZ2VzKSB7XG4gICAgICBNZXNzYWdlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2VzU25hcHNob3RFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzLnB1c2goTWVzc2FnZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIE1lc3NhZ2VzU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VNZXNzYWdlc1NuYXBzaG90RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZXMgPSAoKF9hID0gb2JqZWN0Lm1lc3NhZ2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBNZXNzYWdlLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUmF3RXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBldmVudDogdm9pZCAwLCBzb3VyY2U6IHZvaWQgMCB9O1xufVxudmFyIFJhd0V2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS5ldmVudCksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zb3VyY2UgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uuc291cmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJhd0V2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnQgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFJhd0V2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSYXdFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5ldmVudCA9IChfYSA9IG9iamVjdC5ldmVudCkgIT0gbnVsbCA/IF9hIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc291cmNlID0gKF9iID0gb2JqZWN0LnNvdXJjZSkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUN1c3RvbUV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbmFtZTogXCJcIiwgdmFsdWU6IHZvaWQgMCB9O1xufVxudmFyIEN1c3RvbUV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2UudmFsdWUpLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUN1c3RvbUV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBDdXN0b21FdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ3VzdG9tRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudmFsdWUgPSAoX2IgPSBvYmplY3QudmFsdWUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSdW5TdGFydGVkRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0aHJlYWRJZDogXCJcIiwgcnVuSWQ6IFwiXCIgfTtcbn1cbnZhciBSdW5TdGFydGVkRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50aHJlYWRJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudGhyZWFkSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5JZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UucnVuSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuU3RhcnRlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGhyZWFkSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUnVuU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5TdGFydGVkRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGhyZWFkSWQgPSAoX2EgPSBvYmplY3QudGhyZWFkSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5ydW5JZCA9IChfYiA9IG9iamVjdC5ydW5JZCkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSdW5GaW5pc2hlZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdGhyZWFkSWQ6IFwiXCIsIHJ1bklkOiBcIlwiIH07XG59XG52YXIgUnVuRmluaXNoZWRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRocmVhZElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50aHJlYWRJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJ1bklkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5ydW5JZCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5GaW5pc2hlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGhyZWFkSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUnVuRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuRmluaXNoZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50aHJlYWRJZCA9IChfYSA9IG9iamVjdC50aHJlYWRJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnJ1bklkID0gKF9iID0gb2JqZWN0LnJ1bklkKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJ1bkVycm9yRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBjb2RlOiB2b2lkIDAsIG1lc3NhZ2U6IFwiXCIgfTtcbn1cbnZhciBSdW5FcnJvckV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY29kZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5jb2RlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5FcnJvckV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuY29kZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFJ1bkVycm9yRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJ1bkVycm9yRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuY29kZSA9IChfYSA9IG9iamVjdC5jb2RlKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlID0gKF9iID0gb2JqZWN0Lm1lc3NhZ2UpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RlcFN0YXJ0ZWRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHN0ZXBOYW1lOiBcIlwiIH07XG59XG52YXIgU3RlcFN0YXJ0ZWRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0ZXBOYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5zdGVwTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGVwU3RhcnRlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdGVwU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0ZXBTdGFydGVkRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RlcE5hbWUgPSAoX2EgPSBvYmplY3Quc3RlcE5hbWUpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RlcEZpbmlzaGVkRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBzdGVwTmFtZTogXCJcIiB9O1xufVxudmFyIFN0ZXBGaW5pc2hlZEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RlcE5hbWUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnN0ZXBOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0ZXBGaW5pc2hlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdGVwRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGVwRmluaXNoZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwTmFtZSA9IChfYSA9IG9iamVjdC5zdGVwTmFtZSkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFdmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0ZXh0TWVzc2FnZVN0YXJ0OiB2b2lkIDAsXG4gICAgdGV4dE1lc3NhZ2VDb250ZW50OiB2b2lkIDAsXG4gICAgdGV4dE1lc3NhZ2VFbmQ6IHZvaWQgMCxcbiAgICB0b29sQ2FsbFN0YXJ0OiB2b2lkIDAsXG4gICAgdG9vbENhbGxBcmdzOiB2b2lkIDAsXG4gICAgdG9vbENhbGxFbmQ6IHZvaWQgMCxcbiAgICBzdGF0ZVNuYXBzaG90OiB2b2lkIDAsXG4gICAgc3RhdGVEZWx0YTogdm9pZCAwLFxuICAgIG1lc3NhZ2VzU25hcHNob3Q6IHZvaWQgMCxcbiAgICByYXc6IHZvaWQgMCxcbiAgICBjdXN0b206IHZvaWQgMCxcbiAgICBydW5TdGFydGVkOiB2b2lkIDAsXG4gICAgcnVuRmluaXNoZWQ6IHZvaWQgMCxcbiAgICBydW5FcnJvcjogdm9pZCAwLFxuICAgIHN0ZXBTdGFydGVkOiB2b2lkIDAsXG4gICAgc3RlcEZpbmlzaGVkOiB2b2lkIDBcbiAgfTtcbn1cbnZhciBFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS50ZXh0TWVzc2FnZVN0YXJ0ICE9PSB2b2lkIDApIHtcbiAgICAgIFRleHRNZXNzYWdlU3RhcnRFdmVudC5lbmNvZGUobWVzc2FnZS50ZXh0TWVzc2FnZVN0YXJ0LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGV4dE1lc3NhZ2VDb250ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIFRleHRNZXNzYWdlQ29udGVudEV2ZW50LmVuY29kZShtZXNzYWdlLnRleHRNZXNzYWdlQ29udGVudCwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRleHRNZXNzYWdlRW5kICE9PSB2b2lkIDApIHtcbiAgICAgIFRleHRNZXNzYWdlRW5kRXZlbnQuZW5jb2RlKG1lc3NhZ2UudGV4dE1lc3NhZ2VFbmQsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbFN0YXJ0ICE9PSB2b2lkIDApIHtcbiAgICAgIFRvb2xDYWxsU3RhcnRFdmVudC5lbmNvZGUobWVzc2FnZS50b29sQ2FsbFN0YXJ0LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxBcmdzICE9PSB2b2lkIDApIHtcbiAgICAgIFRvb2xDYWxsQXJnc0V2ZW50LmVuY29kZShtZXNzYWdlLnRvb2xDYWxsQXJncywgd3JpdGVyLnVpbnQzMig0MikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsRW5kICE9PSB2b2lkIDApIHtcbiAgICAgIFRvb2xDYWxsRW5kRXZlbnQuZW5jb2RlKG1lc3NhZ2UudG9vbENhbGxFbmQsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGF0ZVNuYXBzaG90ICE9PSB2b2lkIDApIHtcbiAgICAgIFN0YXRlU25hcHNob3RFdmVudC5lbmNvZGUobWVzc2FnZS5zdGF0ZVNuYXBzaG90LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RhdGVEZWx0YSAhPT0gdm9pZCAwKSB7XG4gICAgICBTdGF0ZURlbHRhRXZlbnQuZW5jb2RlKG1lc3NhZ2Uuc3RhdGVEZWx0YSwgd3JpdGVyLnVpbnQzMig2NikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VzU25hcHNob3QgIT09IHZvaWQgMCkge1xuICAgICAgTWVzc2FnZXNTbmFwc2hvdEV2ZW50LmVuY29kZShtZXNzYWdlLm1lc3NhZ2VzU25hcHNob3QsIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yYXcgIT09IHZvaWQgMCkge1xuICAgICAgUmF3RXZlbnQuZW5jb2RlKG1lc3NhZ2UucmF3LCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY3VzdG9tICE9PSB2b2lkIDApIHtcbiAgICAgIEN1c3RvbUV2ZW50LmVuY29kZShtZXNzYWdlLmN1c3RvbSwgd3JpdGVyLnVpbnQzMig5MCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJ1blN0YXJ0ZWQgIT09IHZvaWQgMCkge1xuICAgICAgUnVuU3RhcnRlZEV2ZW50LmVuY29kZShtZXNzYWdlLnJ1blN0YXJ0ZWQsIHdyaXRlci51aW50MzIoOTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5GaW5pc2hlZCAhPT0gdm9pZCAwKSB7XG4gICAgICBSdW5GaW5pc2hlZEV2ZW50LmVuY29kZShtZXNzYWdlLnJ1bkZpbmlzaGVkLCB3cml0ZXIudWludDMyKDEwNikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJ1bkVycm9yICE9PSB2b2lkIDApIHtcbiAgICAgIFJ1bkVycm9yRXZlbnQuZW5jb2RlKG1lc3NhZ2UucnVuRXJyb3IsIHdyaXRlci51aW50MzIoMTE0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RlcFN0YXJ0ZWQgIT09IHZvaWQgMCkge1xuICAgICAgU3RlcFN0YXJ0ZWRFdmVudC5lbmNvZGUobWVzc2FnZS5zdGVwU3RhcnRlZCwgd3JpdGVyLnVpbnQzMigxMjIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGVwRmluaXNoZWQgIT09IHZvaWQgMCkge1xuICAgICAgU3RlcEZpbmlzaGVkRXZlbnQuZW5jb2RlKG1lc3NhZ2Uuc3RlcEZpbmlzaGVkLCB3cml0ZXIudWludDMyKDEzMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VTdGFydCA9IFRleHRNZXNzYWdlU3RhcnRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50ZXh0TWVzc2FnZUNvbnRlbnQgPSBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50ZXh0TWVzc2FnZUVuZCA9IFRleHRNZXNzYWdlRW5kRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxTdGFydCA9IFRvb2xDYWxsU3RhcnRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDQyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbEFyZ3MgPSBUb29sQ2FsbEFyZ3NFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDUwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbEVuZCA9IFRvb2xDYWxsRW5kRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDc6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA1OCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RhdGVTbmFwc2hvdCA9IFN0YXRlU25hcHNob3RFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgODoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDY2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdGF0ZURlbHRhID0gU3RhdGVEZWx0YUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA5OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzU25hcHNob3QgPSBNZXNzYWdlc1NuYXBzaG90RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDEwOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gODIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJhdyA9IFJhd0V2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDkwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5jdXN0b20gPSBDdXN0b21FdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA5OCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucnVuU3RhcnRlZCA9IFJ1blN0YXJ0ZWRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMDYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bkZpbmlzaGVkID0gUnVuRmluaXNoZWRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMTQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bkVycm9yID0gUnVuRXJyb3JFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTU6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMjIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0ZXBTdGFydGVkID0gU3RlcFN0YXJ0ZWRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTY6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMzApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0ZXBGaW5pc2hlZCA9IFN0ZXBGaW5pc2hlZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUV2ZW50KCk7XG4gICAgbWVzc2FnZS50ZXh0TWVzc2FnZVN0YXJ0ID0gb2JqZWN0LnRleHRNZXNzYWdlU3RhcnQgIT09IHZvaWQgMCAmJiBvYmplY3QudGV4dE1lc3NhZ2VTdGFydCAhPT0gbnVsbCA/IFRleHRNZXNzYWdlU3RhcnRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudGV4dE1lc3NhZ2VTdGFydCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50ZXh0TWVzc2FnZUNvbnRlbnQgPSBvYmplY3QudGV4dE1lc3NhZ2VDb250ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRleHRNZXNzYWdlQ29udGVudCAhPT0gbnVsbCA/IFRleHRNZXNzYWdlQ29udGVudEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50ZXh0TWVzc2FnZUNvbnRlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VFbmQgPSBvYmplY3QudGV4dE1lc3NhZ2VFbmQgIT09IHZvaWQgMCAmJiBvYmplY3QudGV4dE1lc3NhZ2VFbmQgIT09IG51bGwgPyBUZXh0TWVzc2FnZUVuZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50ZXh0TWVzc2FnZUVuZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbFN0YXJ0ID0gb2JqZWN0LnRvb2xDYWxsU3RhcnQgIT09IHZvaWQgMCAmJiBvYmplY3QudG9vbENhbGxTdGFydCAhPT0gbnVsbCA/IFRvb2xDYWxsU3RhcnRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudG9vbENhbGxTdGFydCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbEFyZ3MgPSBvYmplY3QudG9vbENhbGxBcmdzICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRvb2xDYWxsQXJncyAhPT0gbnVsbCA/IFRvb2xDYWxsQXJnc0V2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50b29sQ2FsbEFyZ3MpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxFbmQgPSBvYmplY3QudG9vbENhbGxFbmQgIT09IHZvaWQgMCAmJiBvYmplY3QudG9vbENhbGxFbmQgIT09IG51bGwgPyBUb29sQ2FsbEVuZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50b29sQ2FsbEVuZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGF0ZVNuYXBzaG90ID0gb2JqZWN0LnN0YXRlU25hcHNob3QgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RhdGVTbmFwc2hvdCAhPT0gbnVsbCA/IFN0YXRlU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChvYmplY3Quc3RhdGVTbmFwc2hvdCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGF0ZURlbHRhID0gb2JqZWN0LnN0YXRlRGVsdGEgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RhdGVEZWx0YSAhPT0gbnVsbCA/IFN0YXRlRGVsdGFFdmVudC5mcm9tUGFydGlhbChvYmplY3Quc3RhdGVEZWx0YSkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlc1NuYXBzaG90ID0gb2JqZWN0Lm1lc3NhZ2VzU25hcHNob3QgIT09IHZvaWQgMCAmJiBvYmplY3QubWVzc2FnZXNTbmFwc2hvdCAhPT0gbnVsbCA/IE1lc3NhZ2VzU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChvYmplY3QubWVzc2FnZXNTbmFwc2hvdCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5yYXcgPSBvYmplY3QucmF3ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnJhdyAhPT0gbnVsbCA/IFJhd0V2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5yYXcpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuY3VzdG9tID0gb2JqZWN0LmN1c3RvbSAhPT0gdm9pZCAwICYmIG9iamVjdC5jdXN0b20gIT09IG51bGwgPyBDdXN0b21FdmVudC5mcm9tUGFydGlhbChvYmplY3QuY3VzdG9tKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJ1blN0YXJ0ZWQgPSBvYmplY3QucnVuU3RhcnRlZCAhPT0gdm9pZCAwICYmIG9iamVjdC5ydW5TdGFydGVkICE9PSBudWxsID8gUnVuU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5ydW5TdGFydGVkKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJ1bkZpbmlzaGVkID0gb2JqZWN0LnJ1bkZpbmlzaGVkICE9PSB2b2lkIDAgJiYgb2JqZWN0LnJ1bkZpbmlzaGVkICE9PSBudWxsID8gUnVuRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChvYmplY3QucnVuRmluaXNoZWQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UucnVuRXJyb3IgPSBvYmplY3QucnVuRXJyb3IgIT09IHZvaWQgMCAmJiBvYmplY3QucnVuRXJyb3IgIT09IG51bGwgPyBSdW5FcnJvckV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5ydW5FcnJvcikgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwU3RhcnRlZCA9IG9iamVjdC5zdGVwU3RhcnRlZCAhPT0gdm9pZCAwICYmIG9iamVjdC5zdGVwU3RhcnRlZCAhPT0gbnVsbCA/IFN0ZXBTdGFydGVkRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0ZXBTdGFydGVkKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnN0ZXBGaW5pc2hlZCA9IG9iamVjdC5zdGVwRmluaXNoZWQgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RlcEZpbmlzaGVkICE9PSBudWxsID8gU3RlcEZpbmlzaGVkRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0ZXBGaW5pc2hlZCkgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIoaW50NjQpIHtcbiAgY29uc3QgbnVtID0gZ2xvYmFsVGhpcy5OdW1iZXIoaW50NjQudG9TdHJpbmcoKSk7XG4gIGlmIChudW0gPiBnbG9iYWxUaGlzLk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlwiKTtcbiAgfVxuICBpZiAobnVtIDwgZ2xvYmFsVGhpcy5OdW1iZXIuTUlOX1NBRkVfSU5URUdFUikge1xuICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgc21hbGxlciB0aGFuIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXCIpO1xuICB9XG4gIHJldHVybiBudW07XG59XG5cbi8vIHNyYy9wcm90by50c1xuZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyKSB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fKFthLXpdKS9nLCAoXywgbGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSk7XG59XG5mdW5jdGlvbiBlbmNvZGUoZXZlbnQpIHtcbiAgY29uc3Qgb25lb2ZGaWVsZCA9IHRvQ2FtZWxDYXNlKGV2ZW50LnR5cGUpO1xuICBjb25zdCB7IHR5cGUsIHRpbWVzdGFtcCwgcmF3RXZlbnQsIC4uLnJlc3QgfSA9IGV2ZW50O1xuICBpZiAodHlwZSA9PT0gRXZlbnRUeXBlMi5NRVNTQUdFU19TTkFQU0hPVCkge1xuICAgIHJlc3QubWVzc2FnZXMgPSByZXN0Lm1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4ge1xuICAgICAgY29uc3QgdW50eXBlZE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgaWYgKHVudHlwZWRNZXNzYWdlLnRvb2xDYWxscyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1lc3NhZ2UsIHRvb2xDYWxsczogW10gfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0pO1xuICB9XG4gIGlmICh0eXBlID09PSBFdmVudFR5cGUyLlNUQVRFX0RFTFRBKSB7XG4gICAgcmVzdC5kZWx0YSA9IHJlc3QuZGVsdGEubWFwKChvcGVyYXRpb24pID0+ICh7XG4gICAgICAuLi5vcGVyYXRpb24sXG4gICAgICBvcDogSnNvblBhdGNoT3BlcmF0aW9uVHlwZVtvcGVyYXRpb24ub3AudG9VcHBlckNhc2UoKV1cbiAgICB9KSk7XG4gIH1cbiAgY29uc3QgZXZlbnRNZXNzYWdlID0ge1xuICAgIFtvbmVvZkZpZWxkXToge1xuICAgICAgYmFzZUV2ZW50OiB7XG4gICAgICAgIHR5cGU6IEV2ZW50VHlwZVtldmVudC50eXBlXSxcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICByYXdFdmVudFxuICAgICAgfSxcbiAgICAgIC4uLnJlc3RcbiAgICB9XG4gIH07XG4gIHJldHVybiBFdmVudC5lbmNvZGUoZXZlbnRNZXNzYWdlKS5maW5pc2goKTtcbn1cbmZ1bmN0aW9uIGRlY29kZShkYXRhKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgZXZlbnQgPSBFdmVudC5kZWNvZGUoZGF0YSk7XG4gIGNvbnN0IGRlY29kZWQgPSBPYmplY3QudmFsdWVzKGV2ZW50KS5maW5kKCh2YWx1ZSkgPT4gdmFsdWUgIT09IHZvaWQgMCk7XG4gIGlmICghZGVjb2RlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXZlbnRcIik7XG4gIH1cbiAgZGVjb2RlZC50eXBlID0gRXZlbnRUeXBlW2RlY29kZWQuYmFzZUV2ZW50LnR5cGVdO1xuICBkZWNvZGVkLnRpbWVzdGFtcCA9IGRlY29kZWQuYmFzZUV2ZW50LnRpbWVzdGFtcDtcbiAgZGVjb2RlZC5yYXdFdmVudCA9IGRlY29kZWQuYmFzZUV2ZW50LnJhd0V2ZW50O1xuICBpZiAoZGVjb2RlZC50eXBlID09PSBFdmVudFR5cGUyLk1FU1NBR0VTX1NOQVBTSE9UKSB7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGRlY29kZWQubWVzc2FnZXMpIHtcbiAgICAgIGNvbnN0IHVudHlwZWRNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgIGlmICgoKF9hID0gdW50eXBlZE1lc3NhZ2UudG9vbENhbGxzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubGVuZ3RoKSA9PT0gMCkge1xuICAgICAgICB1bnR5cGVkTWVzc2FnZS50b29sQ2FsbHMgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChkZWNvZGVkLnR5cGUgPT09IEV2ZW50VHlwZTIuU1RBVEVfREVMVEEpIHtcbiAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiBkZWNvZGVkLmRlbHRhKSB7XG4gICAgICBvcGVyYXRpb24ub3AgPSBKc29uUGF0Y2hPcGVyYXRpb25UeXBlW29wZXJhdGlvbi5vcF0udG9Mb3dlckNhc2UoKTtcbiAgICAgIE9iamVjdC5rZXlzKG9wZXJhdGlvbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChvcGVyYXRpb25ba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZGVsZXRlIG9wZXJhdGlvbltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgT2JqZWN0LmtleXMoZGVjb2RlZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKGRlY29kZWRba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWxldGUgZGVjb2RlZFtrZXldO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBFdmVudFNjaGVtYXMucGFyc2UoZGVjb2RlZCk7XG59XG5cbi8vIHNyYy9pbmRleC50c1xudmFyIEFHVUlfTUVESUFfVFlQRSA9IFwiYXBwbGljYXRpb24vdm5kLmFnLXVpLmV2ZW50K3Byb3RvXCI7XG5leHBvcnQge1xuICBBR1VJX01FRElBX1RZUEUsXG4gIGRlY29kZSxcbiAgZW5jb2RlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@ag-ui/proto/dist/index.mjs\n");

/***/ })

};
;